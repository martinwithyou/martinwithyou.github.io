(function(e){function t(t){for(var i,a,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={index:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("c31f")},"42b1":function(e,t,n){"use strict";var i=n("f381"),o=n.n(i);o.a},"4ef0":function(e,t,n){},"93d2":function(e,t,n){},b4a5:function(e,t,n){"use strict";var i=n("d19f"),o=n.n(i);o.a},c034:function(e,t){
/*!
 * ====================================================
 * kityminder-editor - v1.0.67 - 2020-03-04
 * https://github.com/fex-team/kityminder-editor
 * GitHub: https://github.com/fex-team/kityminder-editor 
 * Copyright (c) 2020 ; Licensed 
 * ====================================================
 */
(function(){var e={r:function(t){if(e[t].inited)return e[t].value;if("function"!==typeof e[t].value)return e[t].inited=!0,e[t].value;var n={exports:{}},i=e[t].value(null,n.exports,n);if(e[t].inited=!0,e[t].value=i,void 0!==i)return i;for(var o in n.exports)if(n.exports.hasOwnProperty(o))return e[t].inited=!0,e[t].value=n.exports,n.exports}};e[0]={value:function(t,n,i){var o=[];function r(e){o.push(e)}function a(e){this.selector=e;for(var t=0;t<o.length;t++)"function"==typeof o[t]&&o[t].call(this,this)}return a.assemble=r,r(e.r(7)),r(e.r(9)),r(e.r(14)),r(e.r(18)),r(e.r(11)),r(e.r(12)),r(e.r(5)),r(e.r(6)),r(e.r(8)),r(e.r(15)),r(e.r(10)),r(e.r(13)),r(e.r(16)),r(e.r(17)),i.exports=a}},e[1]={value:function(t,n,i){return i.exports=kityminder.Editor=e.r(0)}},e[2]={value:function(e,t,n){return n.exports=window.HotBox}},e[3]={value:function(e,t,n){}},e[4]={value:function(e,t,n){return n.exports=window.kityminder.Minder}},e[5]={value:function(e,t,n){function i(){var e="\ufeff",t={"application/km":"￿"},n={"\ufeff":"SPLITOR","￿":"application/km"};function i(t,n){if(!this.isPureText(n)){var i=this.whichMimeType(n);if(!i)throw new Error("unknow mimetype!");n=this.getPureText(n)}return!1===t?n:t+e+n}this.registMimeTypeProtocol=function(e,i){if(i&&n[i])throw new Error("sing has registed!");if(e&&t[e])throw new Error("mimetype has registed!");n[i]=e,t[e]=i},this.getMimeTypeProtocol=function(e,n){var o=t[e]||!1;return void 0===n?i.bind(this,o):i(o,n)},this.getSpitor=function(){return e},this.getMimeType=function(e){return void 0!==e?n[e]||null:t}}function o(){this.minder.supportClipboardEvent&&!kity.Browser.gecko&&(this.MimeType=new i)}return i.prototype.isPureText=function(e){return!~e.indexOf(this.getSpitor())},i.prototype.getPureText=function(e){return this.isPureText(e)?e:e.split(this.getSpitor())[1]},i.prototype.whichMimeType=function(e){return this.isPureText(e)?null:this.getMimeType(e.split(this.getSpitor())[0])},n.exports=o}},e[6]={value:function(e,t,n){function i(){var e=this.minder,t=window.kityminder.data;if(e.supportClipboardEvent&&!kity.Browser.gecko){var n=this.fsm,i=this.receiver,o=this.MimeType,r=o.getMimeTypeProtocol("application/km"),a=t.getRegisterProtocol("json").decode,s=[],l=function(t){if(document.activeElement==i.element){var o=t,r=n.state();switch(r){case"input":break;case"normal":var a=[].concat(e.getSelectedNodes());if(a.length){var s;if(a.length>1)if(a.sort((function(e,t){return e.getLevel()-t.getLevel()})),s=a[0].getLevel(),s!==a[a.length-1].getLevel()){var l,c=0,d=a.length,p=d-1;l=a[p];while(l.getLevel()!==s){c=0;while(c<d&&a[c].getLevel()===s){if(a[c].isAncestorOf(l)){a.splice(p,1);break}c++}p--,l=a[p]}}var f=u(a);o.clipboardData.setData("text/plain",f)}t.preventDefault();break}}},c=function(t){if(document.activeElement==i.element){if("normal"!==e.getStatus())return void t.preventDefault();var o=t,r=n.state();switch(r){case"input":break;case"normal":var a=e.getSelectedNodes();a.length&&(o.clipboardData.setData("text/plain",u(a)),e.execCommand("removenode")),t.preventDefault();break}}},d=function(t){if(document.activeElement==i.element){if("normal"!==e.getStatus())return void t.preventDefault();var r=t,l=n.state(),c=r.clipboardData.getData("text/plain");switch(l){case"input":if(!o.isPureText(c))return void t.preventDefault();break;case"normal":var d=e.getSelectedNodes();if("application/km"===o.whichMimeType(c)){var u,p=a(o.getPureText(c));d.forEach((function(t){for(var n=p.length-1;n>=0;n--)u=e.createNode(null,t),e.importNode(u,p[n]),s.push(u),t.appendChild(u)})),e.select(s,!0),s=[],e.refresh()}else{if(r.clipboardData&&r.clipboardData.items[0].type.indexOf("image")>-1){var f=r.clipboardData.items[0].getAsFile(),h=angular.element(document.body).injector().get("server");return h.uploadImage(f).then((function(t){var n=t.data;0===n.errno&&e.execCommand("image",n.data.url)}))}d.forEach((function(t){e.Text2Children(t,c)}))}t.preventDefault();break}}};document.addEventListener("copy",l),document.addEventListener("cut",c),document.addEventListener("paste",d)}function u(n){for(var i=[],o=0,a=n.length;o<a;o++)i.push(e.exportNode(n[o]));return r(t.getRegisterProtocol("json").encode(i))}}return n.exports=i}},e[7]={value:function(e,t,n){function i(){var e;if(e="string"==typeof this.selector?document.querySelector(this.selector):this.selector,!e)throw new Error("Invalid selector: "+this.selector);e.classList.add("km-editor"),this.container=e}return n.exports=i}},e[8]={value:function(t,n,i){var o=e.r(2),r=e.r(19);new r("drag");function a(){var e,t,n=this.fsm,i=this.minder,r=this.hotbox,a=this.receiver;a.element;function s(){n.when("* -> drag",(function(){})),n.when("drag -> *",(function(e,t,n){}))}s();var l,c,d,u,p,f,h=0,m=1,g=20,v=m,b=!1,y=!1;function x(e,t){if(!e)return b=y=!1,f&&kity.releaseFrame(f),void(f=null);f||(f=kity.requestFrame(function(e,t,n){return function(i){switch(e){case"left":n._viewDragger.move({x:-t,y:0},0);break;case"top":n._viewDragger.move({x:0,y:-t},0);break;case"right":n._viewDragger.move({x:t,y:0},0);break;case"bottom":n._viewDragger.move({x:0,y:t},0);break;default:return}i.next()}}(e,t,i)))}i.on("mousedown",(function(n){v=h;var o=i.getPaper().container.getBoundingClientRect();e=n.originEvent.clientX,t=n.originEvent.clientY,p=o.top,l=o.width,c=o.height})),i.on("mousemove",(function(a){if("drag"===n.state()&&v==h&&i.getSelectedNode()&&(Math.abs(e-a.originEvent.clientX)>g||Math.abs(t-a.originEvent.clientY)>g)&&(d=a.originEvent.clientX,u=a.originEvent.clientY-p,d<g?x("right",g-d):d>l-g?x("left",g+d-l):b=!0,u<g?x("bottom",u):u>c-g?x("top",g+u-c):y=!0,b&&y&&x(!1)),"drag"!==n.state()&&v===h&&i.getSelectedNode()&&(Math.abs(e-a.originEvent.clientX)>g||Math.abs(t-a.originEvent.clientY)>g))return"hotbox"===n.state()&&r.active(o.STATE_IDLE),n.jump("drag","user-drag")})),window.addEventListener("mouseup",(function(){if(v=m,"drag"===n.state())return x(!1),n.jump("normal","drag-finish")}),!1)}return i.exports=a}},e[9]={value:function(t,n,i){var o=e.r(19),r=new o("fsm");function a(e,t,n,i){return e.when==t&&(("*"==e.enter||e.enter==i)&&("*"==e.exit||e.exit==n||void 0))}function s(e){var t=e,n=" - ",i=" -> ",o=[];this.jump=function(e,n){if(!n)throw new Error("Please tell fsm the reason to jump");var i,s,l=t,c=[l,e].concat([].slice.call(arguments,1));for(i=0;i<o.length;i++)if(s=o[i],a(s.condition,"before",l,e)&&s.apply(null,c))return;for(t=e,r.log("[{0}] {1} -> {2}",n,l,e),i=0;i<o.length;i++)s=o[i],a(s.condition,"after",l,e)&&s.apply(null,c);return t},this.state=function(){return t},this.when=function(e,t){var r,a,s,l;if(1==arguments.length&&(t=e,e="* -> *"),a=e.split(n),2==a.length?r="before":(a=e.split(i),2==a.length&&(r="after")),!r)throw new Error("Illegal fsm condition: "+e);s=a[0],l=a[1],t.condition={when:r,exit:s,enter:l},o.push(t)}}function l(){this.fsm=new s("normal")}return i.exports=l}},e[10]={value:function(t,n,i){var o=e.r(22);function r(){var e,t,n,i,r=this.minder,a=this.hotbox,s=100;function l(){n=[],i=[],e=r.exportJson()}function c(){var t=r.exportJson(),i=o(t,e);if(i.length){n.push(i);while(n.length>s)n.shift();return e=t,!0}}function d(){var t=r.exportJson();i.push(o(t,e)),e=t}function u(){t=!0;var e=n.pop();e&&(r.applyPatches(e),d()),t=!1}function p(){t=!0;var e=i.pop();e&&(r.applyPatches(e),c()),t=!1}function f(){t||c()&&(i=[])}function h(){return!!n.length}function m(){return!!i.length}function g(e){if(t){var n=e.patch;switch(n.express){case"node.add":r.select(n.node.getChild(n.index),!0);break;case"node.remove":case"data.replace":case"data.remove":case"data.add":r.select(n.node,!0);break}}}this.history={reset:l,undo:u,redo:p,hasUndo:h,hasRedo:m},l(),r.on("contentchange",f),r.on("import",l),r.on("patch",g);var v=a.state("main");v.button({position:"top",label:"撤销",key:"Ctrl + Z",enable:h,action:u,next:"idle"}),v.button({position:"top",label:"重做",key:"Ctrl + Y",enable:m,action:p,next:"idle"})}return window.diff=o,i.exports=r}},e[11]={value:function(t,n,i){var o=e.r(2);function r(){var e=this.fsm,t=this.minder,n=this.receiver,i=this.container,r=new o(i);r.setParentFSM(e),e.when("normal -> hotbox",(function(e,n,i){var o,a=t.getSelectedNode();if(a){var s=a.getRenderBox();o={x:s.cx,y:s.cy}}r.active("main",o)})),e.when("normal -> normal",(function(e,n,i,o){if("shortcut-handle"==i){var a=r.dispatch(o);a?o.preventDefault():t.dispatchKeyEvent(o)}})),e.when("modal -> normal",(function(e,t,i,o){"import-text-finish"==i&&n.element.focus()})),this.hotbox=r}return i.exports=r}},e[12]={value:function(t,n,i){e.r(21);var o=e.r(19),r=new o("input");function a(){var e=this.fsm,t=this.minder,n=this.hotbox,i=this.receiver,o=i.element,a=window.kity.Browser.gecko;function s(){e.when("* -> input",u),e.when("input -> *",(function(e,t,n){switch(n){case"input-cancel":return m();case"input-commit":default:return h()}})),i.onblur((function(t){"input"==e.state()&&e.jump("normal","input-commit")})),t.on("beforemousedown",(function(){"input"==e.state()&&e.jump("normal","input-commit")})),t.on("dblclick",(function(){t.getSelectedNode()&&"readonly"!==t._status&&d()}))}function l(){r.flaged&&o.classList.add("debug"),o.onmousedown=function(e){e.stopPropagation()},t.on("layoutallfinish viewchange viewchanged selectionchange",(function(t){"viewchange"==t.type&&"input"!=e.state()||g()})),g()}function c(){n.state("main").button({position:"center",label:"编辑",key:"F2",enable:function(){return-1!=t.queryCommandState("text")},action:d})}function d(){var n=t.getSelectedNode();if(n){var r=o;if(o.innerText="","bold"===n.getData("font-weight")){var s=document.createElement("b");r.appendChild(s),r=s}if("italic"===n.getData("font-style")){var l=document.createElement("i");r.appendChild(l),r=l}r.innerText=t.queryCommandValue("text"),a&&i.fixFFCaretDisappeared(),e.jump("input","input-request"),i.selectAll()}}function u(){var e=t.getSelectedNode();if(e){var n=e.getData("font-size")||e.getStyle("font-size");o.style.fontSize=n+"px",o.style.minWidth=0,o.style.minWidth=o.clientWidth+"px",o.style.fontWeight=e.getData("font-weight")||"",o.style.fontStyle=e.getData("font-style")||"",o.classList.add("input"),o.focus()}}function p(e){for(var n,i,o,r="",a="\t",s="\n",l=/\S/,c=" ",d=new RegExp("( |"+String.fromCharCode(160)+")"),u=document.createElement("br"),p=!1,f=!1,h=0,g=e.length;h<g;h++)switch(n=e[h],Object.prototype.toString.call(n)){case"[object HTMLBRElement]":r+=s;break;case"[object Text]":if(n=n.textContent.replace("&nbsp;"," "),l.test(n))r+=n;else{o=n.length;while(o--)d.test(n[o])?r+=c:n[o]===a&&(r+=a)}break;case"[object HTMLElement]":switch(n.nodeName){case"B":p=!0;break;case"I":f=!0;break;default:}[].splice.apply(e,[h,1].concat([].slice.call(n.childNodes))),g=e.length,h--;break;case"[object HTMLSpanElement]":[].splice.apply(e,[h,1].concat([].slice.call(n.childNodes))),g=e.length,h--;break;case"[object HTMLImageElement]":n.src&&/http(|s):\/\//.test(n.src)&&t.execCommand("Image",n.src,n.alt);break;case"[object HTMLDivElement]":i=[];var v=0;for(g=n.childNodes.length;v<g;v++)i.push(n.childNodes[v]);i.push(u),[].splice.apply(e,[h,1].concat(i)),g=e.length,h--;break;default:if(n&&n.childNodes.length){i=[];for(v=0,g=n.childNodes.length;v<g;v++)i.push(n.childNodes[v]);i.push(u),[].splice.apply(e,[h,1].concat(i)),g=e.length,h--}else n&&void 0!==n.textContent?r+=n.textContent:r+=""}return r=r.replace(/^\n*|\n*$/g,""),r=r.replace(new RegExp("(\n|\r|\n\r)( |"+String.fromCharCode(160)+"){4}","g"),"$1\t"),t.getSelectedNode().setText(r),p?t.queryCommandState("bold")||t.execCommand("bold"):t.queryCommandState("bold")&&t.execCommand("bold"),f?t.queryCommandState("italic")||t.execCommand("italic"):t.queryCommandState("italic")&&t.execCommand("italic"),m(),r}function f(e,n){try{t.decodeData("text",n).then((function(n){function i(e,t,n){var o=t.data;e.setText(o.text||"");for(var r=t.children||[],a=0;a<r.length;a++){var s=n.createNode(null,e);i(s,r[a],n)}return e}i(e,n,t),t.fire("contentchange"),t.getRoot().renderTree(),t.layout(300)}))}catch(i){if(t.fire("contentchange"),t.getRoot().renderTree(),"Error: Invalid local format"!==i.toString())throw i}}function h(){var e=[].slice.call(o.childNodes);setTimeout((function(){o.innerHTML=""}),0);var n=t.getSelectedNode();if(e=p(e),f(n,e),"root"==n.type){var i=t.getRoot().getText();t.fire("initChangeRoot",{text:i})}}function m(){o.classList.remove("input"),i.selectAll()}function g(){var e=g,n=t.getSelectedNode();n&&(e.timer||(e.timer=setTimeout((function(){var t=n.getRenderBox("TextRenderer");o.style.left=Math.round(t.x)+"px",o.style.top=(r.flaged?Math.round(t.bottom+30):Math.round(t.y))+"px",e.timer=0}))))}l(),s(),c(),this.editText=d}return i.exports=a}},e[13]={value:function(t,n,i){var o=e.r(2);function r(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=65&&e.keyCode<=90||(e.keyCode>=48&&e.keyCode<=57||(108!=e.keyCode&&e.keyCode>=96&&e.keyCode<=111||(108!=e.keyCode&&e.keyCode>=96&&e.keyCode<=111||(229==e.keyCode||0===e.keyCode)))))}function a(){var e,t,n=this.fsm,i=this.minder,a=this.receiver,s=this.container,l=a.element,c=this.hotbox,d=!1;a.listen("normal",(function(e){if(a.enable(),e.is("Space"))return e.preventDefault(),kity.Browser.safari&&(l.innerHTML=""),n.jump("hotbox","space-trigger");switch(e.type){case"keydown":if(i.getSelectedNode()){if(r(e))return n.jump("input","user-input")}else l.innerHTML="";n.jump("normal","shortcut-handle",e);break;case"keyup":break;default:}})),a.listen("hotbox",(function(e){a.disable(),e.preventDefault();c.dispatch(e);if(c.state()==o.STATE_IDLE&&"hotbox"==n.state())return n.jump("normal","hotbox-idle")})),a.listen("input",(function(e){if(a.enable(),"keydown"==e.type){if(e.is("Enter"))return e.preventDefault(),n.jump("normal","input-commit");if(e.is("Esc"))return e.preventDefault(),n.jump("normal","input-cancel");(e.is("Tab")||e.is("Shift + Tab"))&&e.preventDefault()}else if("keyup"==e.type&&e.is("Esc")){if(e.preventDefault(),!d)return n.jump("normal","input-cancel")}else"compositionstart"==e.type?d=!0:"compositionend"==e.type&&setTimeout((function(){d=!1}))}));var u=2;s.addEventListener("mousedown",(function(i){i.button==u&&i.preventDefault(),"hotbox"==n.state()?(c.active(o.STATE_IDLE),n.jump("normal","blur")):"normal"==n.state()&&i.button==u&&(e=i.clientX,t=i.clientY)}),!1),s.addEventListener("mousewheel",(function(e){"hotbox"==n.state()&&(c.active(o.STATE_IDLE),n.jump("normal","mousemove-blur"))}),!1),s.addEventListener("contextmenu",(function(e){e.preventDefault()})),s.addEventListener("mouseup",(function(o){"normal"==n.state()&&o.button==u&&o.clientX==e&&o.clientY==t&&i.getSelectedNode()&&n.jump("hotbox","content-menu")}),!1),c.$element.addEventListener("mousedown",(function(e){e.stopPropagation()}))}return i.exports=a}},e[14]={value:function(t,n,i){var o=e.r(4);function r(){var e=new o({enableKeyReceiver:!1,enableAnimation:!0});e.renderTo(this.selector),e.setTheme(null),e.select(e.getRoot(),!0),e.execCommand("text","中心主题"),this.minder=e}return i.exports=r}},e[15]={value:function(e,t,n){function i(){var e=this,t=this.minder,n=this.hotbox,i=this.fsm,o=n.state("main"),r=["前移:Alt+Up:ArrangeUp","下级:Tab|Insert:AppendChildNode","同级:Enter:AppendSiblingNode","后移:Alt+Down:ArrangeDown","删除:Delete|Backspace:RemoveNode","上级:Shift+Tab|Shift+Insert:AppendParentNode"],a=0;function s(){t.fire("importNodeData")}function l(){t.fire("exportNodeData")}r.forEach((function(n){var r=n.split(":"),s=r.shift(),l=r.shift(),c=r.shift();o.button({position:"ring",label:s,key:l,action:function(){if(0===c.indexOf("Append")){function n(){--a||e.editText(),t.off("layoutallfinish",n)}a++,t.execCommand(c,"分支主题"),t.on("layoutallfinish",n)}else t.execCommand(c),i.jump("normal","command-executed")},enable:function(){return-1!=t.queryCommandState(c)}})})),o.button({position:"bottom",label:"导入节点",key:"Alt + V",enable:function(){var e=t.getSelectedNodes();return 1==e.length},action:s,next:"idle"}),o.button({position:"bottom",label:"导出节点",key:"Alt + C",enable:function(){var e=t.getSelectedNodes();return 1==e.length},action:l,next:"idle"})}return n.exports=i}},e[16]={value:function(e,t,n){function i(){var e=this.minder,t=this.hotbox,n=t.state("main");n.button({position:"top",label:"优先级",key:"P",next:"priority",enable:function(){return-1!=e.queryCommandState("priority")}});var i=t.state("priority");"123456789".replace(/./g,(function(t){i.button({position:"ring",label:"P"+t,key:t,action:function(){e.execCommand("Priority",t)}})})),i.button({position:"center",label:"移除",key:"Del",action:function(){e.execCommand("Priority",0)}}),i.button({position:"top",label:"返回",key:"esc",next:"back"})}return n.exports=i}},e[17]={value:function(e,t,n){function i(){var e=this.minder,t=this.hotbox,n=t.state("main");n.button({position:"top",label:"进度",key:"G",next:"progress",enable:function(){return-1!=e.queryCommandState("progress")}});var i=t.state("progress");"012345678".replace(/./g,(function(t){i.button({position:"ring",label:"G"+t,key:t,action:function(){e.execCommand("Progress",parseInt(t)+1)}})})),i.button({position:"center",label:"移除",key:"Del",action:function(){e.execCommand("Progress",0)}}),i.button({position:"top",label:"返回",key:"esc",next:"back"})}return n.exports=i}},e[18]={value:function(t,n,i){var o=e.r(23);e.r(2);function r(){var e=this.fsm,t=this.minder,n=document.createElement("div");n.contentEditable=!0,n.setAttribute("tabindex",-1),n.classList.add("receiver"),n.onkeydown=n.onkeypress=n.onkeyup=a,n.addEventListener("compositionstart",a),this.container.appendChild(n);var i={element:n,selectAll:function(){n.innerHTML||(n.innerHTML="&nbsp;");var e=document.createRange(),t=window.getSelection();e.selectNodeContents(n),t.removeAllRanges(),t.addRange(e),n.focus()},enable:function(){n.setAttribute("contenteditable",!0)},disable:function(){n.setAttribute("contenteditable",!1)},fixFFCaretDisappeared:function(){n.removeAttribute("contenteditable"),n.setAttribute("contenteditable","true"),n.blur(),n.focus()},onblur:function(e){n.onblur=e}};i.selectAll(),t.on("beforemousedown",i.selectAll),t.on("receiverfocus",i.selectAll),t.on("readonly",(function(){t.disable(),editor.receiver.element.parentElement.removeChild(editor.receiver.element),editor.hotbox.$container.removeChild(editor.hotbox.$element)}));var r=[];function a(t){var n;t.is=function(e){for(var t=e.split("|"),n=0;n<t.length;n++)if(o.is(this,t[n]))return!0;return!1};for(var i=0;i<r.length;i++)if(n=r[i],("*"==n.notifyState||n.notifyState==e.state())&&n.call(null,t))return}i.listen=function(e,t){1==arguments.length&&(t=e,e="*"),t.notifyState=e,r.push(t)},this.receiver=i}return i.exports=r}},e[19]={value:function(t,n,i){var o=e.r(20);function r(){}function a(e){for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);return t}function s(e){var t=this.flaged=-1!=window.location.search.indexOf(e);if(t){var n=a(e)%360,i=o("background: hsl({0}, 50%, 80%); color: hsl({0}, 100%, 30%); padding: 2px 3px; margin: 1px 3px 0 0;border-radius: 2px;",n),s="background: none; color: black;";this.log=function(){var t=o.apply(null,arguments);console.log(o("%c{0}%c{1}",e,t),i,s)}}else this.log=r}return i.exports=s}},e[20]={value:function(e,t,n){function i(e,t){return"object"!=typeof t&&(t=[].slice.call(arguments,1)),String(e).replace(/\{(\w+)\}/gi,(function(e,n){return t[n]||n}))}return n.exports=i}},e[21]={value:function(e,t,n){!("innerText"in document.createElement("a"))&&"getSelection"in window&&(HTMLElement.prototype.__defineGetter__("innerText",(function(){var e,t,n=window.getSelection(),i=[];for(t=0;t<n.rangeCount;t++)i[t]=n.getRangeAt(t);for(n.removeAllRanges(),n.selectAllChildren(this),e=n.toString(),n.removeAllRanges(),t=0;t<i.length;t++)n.addRange(i[t]);return e})),HTMLElement.prototype.__defineSetter__("innerText",(function(e){this.innerHTML=(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")})))}},e[22]={value:function(e,t,n){
/*!
    * https://github.com/Starcounter-Jack/Fast-JSON-Patch
    * json-patch-duplex.js 0.5.0
    * (c) 2013 Joachim Wester
    * MIT license
    */
var i=function(){return Object.keys?Object.keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}}();function o(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function r(e){return"object"===typeof e?JSON.parse(JSON.stringify(e)):e}function a(e,t,n,s){for(var l=i(t),c=i(e),d=!1,u=c.length-1;u>=0;u--){var p=c[u],f=e[p];if(t.hasOwnProperty(p)){var h=t[p];"object"==typeof f&&null!=f&&"object"==typeof h&&null!=h?a(f,h,n,s+"/"+o(p)):f!=h&&(!0,n.push({op:"replace",path:s+"/"+o(p),value:r(h)}))}else n.push({op:"remove",path:s+"/"+o(p)}),d=!0}if(d||l.length!=c.length)for(u=0;u<l.length;u++){p=l[u];e.hasOwnProperty(p)||n.push({op:"add",path:s+"/"+o(p),value:r(t[p])})}}function s(e,t){var n=[];return a(e,t,n,""),n}return n.exports=s}},e[23]={value:function(t,n,i){var o=e.r(24),r=4096,a=8192,s=16384;function l(e){return"string"==typeof e?u(e):d(e)}function c(e,t){return e&&t&&l(e)==l(t)}function d(e){var t=0;if((e.ctrlKey||e.metaKey)&&(t|=r),e.altKey&&(t|=a),e.shiftKey&&(t|=s),-1===[16,17,18,91].indexOf(e.keyCode)){if(229===e.keyCode&&e.keyIdentifier)return t|parseInt(e.keyIdentifier.substr(2),16);t|=e.keyCode}return t}function u(e){var t=0;return e.toLowerCase().split(/\s*\+\s*/).forEach((function(e){switch(e){case"ctrl":case"cmd":t|=r;break;case"alt":t|=a;break;case"shift":t|=s;break;default:t|=o[e]}})),t}n.hash=l,n.is=c}},e[24]={value:function(e,t,n){var i={Shift:16,Control:17,Alt:18,CapsLock:20,BackSpace:8,Tab:9,Enter:13,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,Direction:{37:1,38:1,39:1,40:1},Del:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190};for(var o in i)i.hasOwnProperty(o)&&(i[o.toLowerCase()]=i[o]);var r=65,a="a".charCodeAt(0);"abcdefghijklmnopqrstuvwxyz".split("").forEach((function(e){i[e]=r+(e.charCodeAt(0)-a)}));var s=9;do{i[s.toString()]=s+48}while(--s);n.exports=i}};var t={"expose-editor":1};function n(n){e.r([t[n]])}n("expose-editor")})()},c31f:function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),o=n("5c96"),r=n.n(o),a=(n("0fae"),n("5071")),s=n.n(a),l=(n("0190"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("flowDashboard")],1)}),c=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"super-flow-base-demo"},[n("super-flow",{ref:"superFlow",attrs:{id:"only","node-list":e.nodeList,"link-list":e.linkList,origin:e.origin,"graph-menu":e.graphMenuList,"node-menu":e.nodeMenuList,"link-menu":e.linkMenuList,"enter-intercept":e.enterIntercept,"output-intercept":e.outputIntercept,"link-desc":e.linkDesc},scopedSlots:e._u([{key:"node",fn:function(t){var i=t.meta;return[n("div",{class:"flow-node flow-node-"+i.prop},[n("header",[e._v(" "+e._s(i.name)+" ")]),n("section",[e._v(" "+e._s(i.desc)+" ")])])]}}])}),n("el-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入节点名称",maxlength:"30"},model:{value:e.nodeSetting.name,callback:function(t){e.$set(e.nodeSetting,"name",t)},expression:"nodeSetting.name"}})],1),n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述",maxlength:"30"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"连线描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.drawerConf.cancel}},[e._v(" 取 消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v(" 确 定 ")])],1)],1)],1)},u=[],p=n("fd1a");const f={node:0,link:1};console.log(p);var h={data(){return{drawerType:f,drawerConf:{title:"",visible:!1,type:null,info:null,open:(e,t)=>{const n=this.drawerConf;n.visible=!0,n.type=e,n.info=t,n.type===f.node?(n.title="节点",this.$refs.nodeSetting&&this.$refs.nodeSetting.resetFields(),this.$set(this.nodeSetting,"name",t.meta.name),this.$set(this.nodeSetting,"desc",t.meta.desc)):(n.title="连线",this.$refs.linkSetting&&this.$refs.linkSetting.resetFields(),this.$set(this.linkSetting,"desc",t.meta?t.meta.desc:""))},cancel:()=>{this.drawerConf.visible=!1,this.drawerConf.type===f.node?this.$refs.nodeSetting.clearValidate():this.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{name:"",desc:""},origin:[681,465],nodeList:[],linkList:[],graphMenuList:[[{label:"开始节点",disable(e){return!!e.nodeList.find(e=>"start"===e.meta.prop)},selected:(e,t)=>{const n=e.nodeList.find(e=>"start"===e.meta.prop);n||e.addNode({width:100,height:80,coordinate:t,meta:{prop:"start",name:"开始节点"}})}},{label:"条件节点",disable:!1,selected:(e,t)=>{e.addNode({width:160,height:80,coordinate:t,meta:{prop:"condition",name:"条件节点"}})}},{label:"审批节点",disable:!1,selected:(e,t)=>{e.addNode({width:160,height:80,coordinate:t,meta:{prop:"approval",name:"审批节点"}})}},{label:"抄送节点",disable:!1,selected:(e,t)=>{e.addNode({width:160,height:80,coordinate:t,meta:{prop:"cc",name:"抄送节点"}})}},{label:"结束节点",disable(e){return!!e.nodeList.find(e=>"end"===e.meta.prop)},selected:(e,t)=>{e.addNode({width:80,height:50,coordinate:t,meta:{prop:"end",name:"结束节点"}})}}],[{label:"打印数据",selected:e=>{let t=e.toJSON(),{nodeList:n,linkList:i}=t;console.log(n),console.log(i),n.map(e=>{let t=[];i.map(n=>{n.startId===e.id&&t.push({resourceId:e.id})}),console.log("linkList__",i),p.childShapes.push({outgoing:t,resourceId:e.id,bounds:{upperLeft:{x:e.coordinate[0],y:e.coordinate[1]},lowerRight:{x:e.coordinate[0]+e.width,y:e.coordinate[0]+e.height}},stencil:{id:"UserTask"},dockers:[],properties:{formproperties:{formProperties:[]},multiinstance_collection:"",formkeydefinition:"",tasklisteners:{taskListeners:[]},multiinstance_condition:"",executionlisteners:{executionListeners:[]},documentation:"",prioritydefinition:"",multiinstance_cardinality:"",multiinstance_variable:"",usertaskassignment:"",multiinstance_type:"None",exclusivedefinition:!0,duedatedefinition:"",asynchronousdefinition:!1,overrideid:e.id,name:e.meta.name,isforcompensation:"false"},childShapes:[]})}),i.map(e=>{p.childShapes.push({outgoing:[{resourceId:e.endId}],resourceId:e.id,bounds:{upperLeft:{x:e.startAt[0],y:e.startAt[1]},lowerRight:{x:e.endAt[0],y:e.endAt[1]}},stencil:{id:"SequenceFlow"},dockers:[],properties:{defaultflow:"false",conditionsequenceflow:"${param1==1}",executionlisteners:"",documentation:"",overrideid:"flow53",name:"受理"},childShapes:[],target:{resourceId:e.endId}})}),console.log("tsconfig___",p);let o="http://localhost:8083/activitiModeler/editor?modelId=6217529&companyId=34&caseClass=1&processFlag=1&caseType=1&processType=&createUser=136&casePhaseNo=1,&agentPoint=1&processStatus=&flag=";try{window.top.postMessage(p,o)}catch(r){console.log(r)}}},{label:"全选",selected:(e,t)=>{console.log(t),e.selectAll()}}]],nodeMenuList:[[{label:"删除",disable:!1,hidden(e){return"start"===e.meta.prop},selected(e,t){console.log(t),e.remove()}}],[{label:"编辑",selected:(e,t)=>{console.log(t),this.drawerConf.open(f.node,e)}}]],linkMenuList:[[{label:"删除",disable:!1,selected:(e,t)=>{console.log(t),e.remove()}}],[{label:"编辑",disable:!1,selected:(e,t)=>{console.log(t),this.drawerConf.open(f.link,e)}}]]}},created(){const e=[{id:"nodeS3WgFnzCI15X58Qw",width:100,height:80,coordinate:[-644,-148],meta:{prop:"start",name:"开始节点"}},{id:"nodefHsy9uJObPtdHZv1",width:160,height:80,coordinate:[-200,-148],meta:{prop:"approval",name:"审批节点",desc:"111111"}},{id:"nodeni9QOqT3mI7hsMau",width:160,height:80,coordinate:[-442,-275],meta:{prop:"condition",name:"条件节点"}},{id:"nodeZBK0ZPpgMe1exezE",width:160,height:80,coordinate:[-200,-275],meta:{prop:"approval",name:"审批节点"}},{id:"nodeqkK9zjcDz53xKRlK",width:160,height:80,coordinate:[34,-209],meta:{prop:"cc",name:"抄送节点"}},{id:"nodeDhVU6w2KbEnJCjZs",width:80,height:50,coordinate:[286,-133],meta:{prop:"end",name:"结束节点"}},{id:"nodesyxisLH1hJDdPsxx",width:160,height:80,coordinate:[34,-75],meta:{prop:"cc",name:"抄送节点"}},{id:"node0aiA9VuhjkiAdZCs",width:160,height:80,coordinate:[-200,-2],meta:{prop:"approval",name:"审批节点"}},{id:"nodeG3WeFnzCI15X58Qw",width:160,height:80,coordinate:[-442,-2],meta:{prop:"condition",name:"条件节点"}},{id:"node7WXbwOR6kSFD53Hf",width:160,height:80,coordinate:[-442,-148],meta:{prop:"condition",name:"条件节点"}}],t=[{id:"linkcs9ZhumWeTHrtUy8",startId:"nodeS3WgFnzCI15X58Qw",endId:"nodeni9QOqT3mI7hsMau",startAt:[100,40],endAt:[0,40],meta:null},{id:"linkBDld5rDBw4C6kiva",startId:"nodefHsy9uJObPtdHZv1",endId:"nodeqkK9zjcDz53xKRlK",startAt:[160,40],endAt:[0,40],meta:null},{id:"linkA0ZZxRlDI9AOonuq",startId:"node7WXbwOR6kSFD53Hf",endId:"nodefHsy9uJObPtdHZv1",startAt:[160,40],endAt:[0,40],meta:null},{id:"linkhCKTpRAf89gcujGS",startId:"nodeni9QOqT3mI7hsMau",endId:"nodeZBK0ZPpgMe1exezE",startAt:[160,40],endAt:[0,40],meta:null},{id:"link2o7VZ7DRaSFKtB0g",startId:"nodeqkK9zjcDz53xKRlK",endId:"nodeDhVU6w2KbEnJCjZs",startAt:[160,40],endAt:[0,25],meta:null},{id:"linkII013ovDctUDuPLu",startId:"nodeS3WgFnzCI15X58Qw",endId:"nodeG3WeFnzCI15X58Qw",startAt:[100,40],endAt:[0,40],meta:null},{id:"link6MOmsq1EqzlWcG1n",startId:"nodeZBK0ZPpgMe1exezE",endId:"nodeqkK9zjcDz53xKRlK",startAt:[160,40],endAt:[0,40],meta:null},{id:"link52SczSXHmuyKDzRU",startId:"nodesyxisLH1hJDdPsxx",endId:"nodeDhVU6w2KbEnJCjZs",startAt:[160,40],endAt:[0,25],meta:null},{id:"link2hBQDTuIG4ZFYyE0",startId:"node0aiA9VuhjkiAdZCs",endId:"nodesyxisLH1hJDdPsxx",startAt:[160,40],endAt:[0,40],meta:null},{id:"linkrwdW87FmOma5rPVo",startId:"nodeG3WeFnzCI15X58Qw",endId:"node0aiA9VuhjkiAdZCs",startAt:[160,40],endAt:[0,40],meta:null},{id:"linknL75dQV0AWZA85sq",startId:"nodeS3WgFnzCI15X58Qw",endId:"node7WXbwOR6kSFD53Hf",startAt:[100,40],endAt:[0,40],meta:null}];setTimeout(()=>{this.nodeList=e,this.linkList=t},100)},mounted(){let e=document.getElementById("only");console.log(e)},methods:{enterIntercept(e,t,n){console.log(n);const i=e.meta.prop;switch(t.meta.prop){case"start":return!1;case"approval":return["start","approval","condition","cc"].includes(i);case"condition":return["start","approval","condition","cc"].includes(i);case"end":return["approval","cc"].includes(i);default:return!0}},outputIntercept(e,t){return console.log(t),!("end"===e.meta.prop)},linkDesc(e){return e.meta?e.meta.desc:""},settingSubmit(){const e=this.drawerConf;this.drawerConf.type===f.node?(e.info.meta||(e.info.meta={}),Object.keys(this.nodeSetting).forEach(t=>{this.$set(e.info.meta,t,this.nodeSetting[t])}),this.$refs.nodeSetting.resetFields()):(e.info.meta||(e.info.meta={}),Object.keys(this.linkSetting).forEach(t=>{this.$set(e.info.meta,t,this.linkSetting[t])}),this.$refs.linkSetting.resetFields()),e.visible=!1}}},m=h,g=(n("b4a5"),n("2877")),v=Object(g["a"])(m,d,u,!1,null,null,null),b=v.exports,y={name:"app",components:{flowDashboard:b},data(){return{importJson:{data:{id:2,text:"Design project",image:"http://image.namedq.com/uploads/20191011/18/1570789062-WiOwJhGFDp.jpg",imageSize:{width:200,height:200}},children:[{data:{text:"Designsy",priority:1,id:3},children:[{data:{text:"Designsy",id:4},children:[{data:{text:"Designsy",id:5}},{data:{text:"Designsy",id:5}},{data:{text:"Designsy",id:5}}]},{data:{text:"Designsy",id:5}},{data:{text:"Designsy",id:62}},{data:{text:"Designsy",id:73}},{data:{text:"Designsy",id:84}}]},{data:{text:"Designsy",priority:2,id:9}},{data:{text:"Designsy",priority:3,id:102}},{data:{text:"Designsy",priority:4,id:113}},{data:{text:"Designsy",priority:5,id:124}}]}}},mounted(){},methods:{minderHandle(e){console.log(e)}}},x=y,w=(n("42b1"),Object(g["a"])(x,l,c,!1,null,null,null)),k=w.exports,S=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"minder"},[n("div",{attrs:{id:"minder-container"}})])}],D=(n("f0e2"),n("93d2"),n("48bb"),n("2257"),n("8b98"),n("7101"),n("c034"),{name:"kityMinder",data(){return{minder:{}}},props:{importJson:{type:Object,default:()=>[]}},mounted(){this.KMEditor=new window.kityminder.Editor(document.querySelector("#minder-container")),this.minder=this.KMEditor.minder,this.minder.importJson(this.importJson),this.$emit("minder",this.minder)}}),E=D,T=(n("d788"),Object(g["a"])(E,S,C,!1,null,null,null)),A=T.exports;A.install=function(e){e.component(A.name,A)};var I=A;i["default"].use(r.a),i["default"].use(s.a),i["default"].use(I),i["default"].config.productionTip=!1,new i["default"]({render:e=>e(k)}).$mount("#app")},d19f:function(e,t,n){},d788:function(e,t,n){"use strict";var i=n("4ef0"),o=n.n(i);o.a},f381:function(e,t,n){},fd1a:function(e){e.exports=JSON.parse('{"resourceId":"7050005","ssextensions":[],"bounds":{"upperLeft":{"x":0,"y":0},"lowerRight":{"x":1200,"y":1200}},"stencilset":{"namespace":"http://b3mn.org/stencilset/bpmn2.0#","url":"stencilsets/bpmn2.0/bpmn2.0.json"},"stencil":{"id":"BPMNDiagram"},"properties":{"process_id":"processId_c7c8a6e8125a49308d9ac76434ee9975","signaldefinitions":"","messagedefinitions":"","process_namespace":"http://www.activiti.org/processdef","executionlisteners":"","eventlisteners":"","documentation":"","name":"","process_version":"","process_author":""},"childShapes":[]}')}});
//# sourceMappingURL=index.dbf2abea.js.map