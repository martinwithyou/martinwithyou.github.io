(function(e){function t(t){for(var i,a,l=t[0],r=t[1],d=t[2],p=0,u=[];p<l.length;p++)a=l[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&u.push(o[a][0]),o[a]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);c&&c(t);while(u.length)u.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,l=1;l<n.length;l++){var r=n[l];0!==o[r]&&(i=!1)}i&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={index:0},s=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=r;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),o=n.n(i);o.a},1189:function(e){e.exports=JSON.parse('{"modelName":"测试123","description":"测试123","companyId":"34","caseClass":"1","caseType":"1","processFlag":"1","createUser":"136","casePhaseNo":"1","agentPoint":"1","status":"1","flowInfo":{"nodeList":[],"linkList":[]}}')},"1dee":function(e,t,n){},2473:function(e,t,n){"use strict";var i=n("a9db"),o=n.n(i);o.a},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),o=n("5c96"),s=n.n(o),a=(n("0fae"),n("5071")),l=n.n(a),r=(n("0190"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("flowDashboard",{staticStyle:{display:"none"}}),n("Demo")],1)}),d=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"super-flow-base-demo"},[[n("super-flow",{ref:"superFlow",attrs:{"node-list":e.nodeList,"link-list":e.linkList,origin:e.origin,"graph-menu":e.graphMenuList,"node-menu":e.nodeMenuList,"link-menu":e.linkMenuList,"enter-intercept":e.enterIntercept,"output-intercept":e.outputIntercept,"link-desc":e.linkDesc},scopedSlots:e._u([{key:"node",fn:function(t){var i=t.meta;return["start"===i.prop?n("div",{staticClass:"startNode"},[n("div",{staticClass:"inner"},[n("h6",[e._v("开始")])])]):"end"===i.prop?n("div",{staticClass:"endNode"},[n("div",{staticClass:"inner"},[n("h6",[e._v("结束")])])]):n("div",{class:"flow-node otherNode",on:{click:function(t){return e.SingleClick(i)},dblclick:function(t){return e.DoubleClick(i)}}},[i.desc.length>5?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.desc,placement:"right"}},[i.selectStatus?n("section",{staticClass:"Active"},[e._v(" "+e._s(i.desc)+" ")]):e._e(),i.selectStatus?e._e():n("section",[e._v(" "+e._s(i.desc)+" ")])]):e._e(),i.desc.length<=5?[i.selectStatus?n("section",{staticClass:"Active"},[e._v(" "+e._s(i.desc)+" ")]):e._e(),i.selectStatus?e._e():n("section",[e._v(" "+e._s(i.desc)+" ")])]:e._e()],2)]}}])})],n("el-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"连线描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.drawerConf.cancel}},[e._v(" 取 消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v(" 确 定 ")])],1)],1),n("el-dialog",{attrs:{title:"节点",visible:e.newVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.newVisible=t}}},[n("el-form",{ref:"newNodeSetting",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.conformSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.EditorDesc,callback:function(t){e.EditorDesc=t},expression:"EditorDesc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelDrawerConf}},[e._v(" 取 消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.conformSubmit}},[e._v(" 确 定 ")])],1)],1)],2)},p=[],u=n("1189"),m=n("5f06"),f=n("bc3a"),h=n.n(f);const g="http://58.240.194.22:8869",v=h.a.create({baseURL:g,timeout:5e4});v.interceptors.request.use(e=>e,e=>(console.log(e),Promise.reject(e))),v.interceptors.response.use(e=>{const t=e.data;return t},e=>(console.log("err"+e),Object(o["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)));var w=v;function b(e){return w({url:"/activitiModeler/service/model/7050005",method:"get",params:{id:e}})}function k(e){return w({url:"/activitiModeler/service//model/save",method:"post",data:e})}function S(e){return w({url:"/vue-element-admin/article/list",method:"get",params:e})}const y={node:0,link:1};var L={data(){return{selectNode:{},EditorDesc:"",newVisible:!1,graph:{},drawerType:y,drawerConf:{title:"",visible:!1,type:null,info:null,open:(e,t)=>{const n=this.drawerConf;n.visible=!0,n.type=e,n.info=t,n.type===y.node?(n.title="节点",this.$refs.nodeSetting&&this.$refs.nodeSetting.resetFields(),this.$set(this.nodeSetting,"name",t.meta.name),this.$set(this.nodeSetting,"desc",t.meta.desc)):(n.title="连线",this.$refs.linkSetting&&this.$refs.linkSetting.resetFields(),this.$set(this.linkSetting,"desc",t.meta?t.meta.desc:""))},cancel:()=>{this.drawerConf.visible=!1,this.drawerConf.type===y.node?this.$refs.nodeSetting.clearValidate():this.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{name:"",desc:""},origin:[300,465],nodeList:[],linkList:[],graphMenuList:[[{label:"开始节点",disable(e){return!!e.nodeList.find(e=>"start"===e.meta.prop)},selected:(e,t)=>{const n=e.nodeList.find(e=>"start"===e.meta.prop);n||e.addNode({width:100,height:80,coordinate:t,meta:{prop:"start",name:"开始节点"}})}},{label:"条件节点",disable:!1,selected:(e,t)=>{let n={circularFlag:!1,coordinate:t,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"};e.addNode(n),console.log("graph_____",e)}},{label:"结束节点",disable(e){return!!e.nodeList.find(e=>"end"===e.meta.prop)},selected:(e,t)=>{e.addNode({width:80,height:50,coordinate:t,meta:{prop:"end",name:"结束节点"}})}}],[{label:"发送数据",selected:e=>{let t=e.toJSON(),{nodeList:n,linkList:i}=t;this.formatNode(n,i),this.formatLink(i),this.getPoints(),console.log(n),console.log(i),console.log(u),console.log(this.graph)}},{label:"全选",selected:(e,t)=>{console.log(t),e.selectAll()}}]],nodeMenuList:[[{label:"删除",disable:!1,hidden(e){return"start"===e.meta.prop},selected(e,t){console.log(t),e.remove()}}],[{label:"编辑",selected:(e,t)=>{console.log(t),console.log("drawerType.node___",y.node),console.log("node___",e),this.drawerConf.open(y.node,e)}}]],linkMenuList:[[{label:"删除",disable:!1,selected:(e,t)=>{console.log(t),e.remove()}}],[{label:"编辑",disable:!1,selected:(e,t)=>{console.log(t),this.drawerConf.open(y.link,e)}}]]}},created(){},mounted(){this.setOriginData(),this.getData()},methods:{async getData(){let e=await b();this.nodeList=e.nodeList,this.linkList=e.linkList,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-400,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.nodeList.map(e=>{e.meta.id=e.id}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]}),this.editStatus(),this.selectStatus()},setOriginData(){this.nodeList=m.demo2,this.linkList=m.demo1,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-600,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]})},conformSubmit(){this.selectNode.meta.desc=this.EditorDesc,this.newVisible=!1},cancelDrawerConf(){this.newVisible=!1},DoubleClick(e){this.nodeList.map(t=>{t.id===e.id&&(console.log("双击事件___",e),t.meta.selectStatus=!1,t.meta.editStatus=!0,this.newVisible=!0,this.EditorDesc=e.desc,this.selectNode=t)})},SingleClick(e){this.nodeList.map(t=>{t.id===e.id&&(t.meta.selectStatus=!t.meta.selectStatus,console.log("单击事件___",t),this.selectNode=t)})},editStatus(){this.nodeList.map(e=>{e.meta.editStatus=!1})},selectStatus(){this.nodeList.map(e=>{e.meta.selectStatus=!1})},enterIntercept(e,t,n){console.log(n);const i=e.meta.prop;switch(t.meta.prop){case"start":return!1;case"approval":return["start","approval","condition","cc"].includes(i);case"condition":return["start","approval","condition","cc"].includes(i);case"end":return["start","approval","condition","cc"].includes(i);default:return!0}},outputIntercept(e,t){return console.log(t),console.log(e),this.graph=t,!("end"===e.meta.prop)},linkDesc(e){return e.meta?e.meta.desc:""},settingSubmit(){const e=this.drawerConf;this.drawerConf.type===y.node?(e.info.meta||(e.info.meta={}),Object.keys(this.nodeSetting).forEach(t=>{this.$set(e.info.meta,t,this.nodeSetting[t])}),this.$refs.nodeSetting.resetFields()):(e.info.meta||(e.info.meta={}),Object.keys(this.linkSetting).forEach(t=>{this.$set(e.info.meta,t,this.linkSetting[t])}),this.$refs.linkSetting.resetFields()),e.visible=!1},formatNode(e){u.flowInfo.nodeList=e},formatLink(e){u.flowInfo.linkList=e},getPoints(){let e=[];this.graph.linkList.map(t=>{e.push({id:t.id,pointList:t.pathPointList.pointList})}),u.flowInfo.linkList.map(t=>{e.map(e=>{e.id===t.id&&(t.pointList=e.pointList)})}),u.flowInfo.linkList.map(e=>{e.pointList.map((t,n)=>{e.pointList[n]={x:t[0],y:t[1]}})}),this.postData()},async postData(){let e=await k(u);console.log(e)}}},C=L,_=(n("2473"),n("2877")),M=Object(_["a"])(C,c,p,!1,null,null,null),D=M.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"super-flow-demo1"},[n("div",{staticClass:"node-container"},e._l(e.nodeItemList,(function(t,i){return n("span",{key:i,staticClass:"node-item",on:{mousedown:function(n){return e.nodeItemMouseDown(n,t.value)}}},[e._v(" "+e._s(t.label)+" ")])})),0),n("div",{ref:"flowContainer",staticClass:"flow-container"},[n("super-flow",{ref:"superFlow",attrs:{"node-list":e.nodeList,"link-list":e.linkList,origin:e.origin,"graph-menu":e.graphMenu,"node-menu":e.nodeMenu,"link-menu":e.linkMenu,"link-base-style":e.linkBaseStyle,"link-style":e.linkStyle,"link-desc":e.linkDesc,"enter-intercept":e.enterIntercept,"output-intercept":e.outputIntercept},scopedSlots:e._u([{key:"node",fn:function(t){var i=t.meta;return["start"===i.prop?n("div",{staticClass:"startNode"},[n("div",{staticClass:"inner"},[n("h6",[e._v("开始")])])]):"end"===i.prop?n("div",{staticClass:"endNode"},[n("div",{staticClass:"inner"},[n("h6",[e._v("结束")])])]):n("div",{staticClass:"flow-node",on:{dblclick:function(t){return e.DoubleClick(i)}}},[i.desc.length>5?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.desc,placement:"right"}},[n("section",[e._v(" "+e._s(i.desc)+" ")])]):e._e(),i.desc.length<=5?[n("section",[e._v(" "+e._s(i.desc)+" ")])]:e._e()],2)]}}])})],1)]),n("el-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting}},[n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting}},[n("el-form-item",{attrs:{label:"连线描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.drawerConf.cancel}},[e._v(" 取 消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v(" 确 定 ")])],1)],1),n("el-dialog",{attrs:{title:"节点",visible:e.newVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.newVisible=t}}},[n("el-form",{ref:"newNodeSetting",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.conformSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.EditorDesc,callback:function(t){e.EditorDesc=t},expression:"EditorDesc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelDrawerConf}},[e._v(" 取 消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.conformSubmit}},[e._v(" 确 定 ")])],1)],1)],1)},I=[];const x={node:0,link:1};var $={data(){return{selectNode:{},EditorDesc:"",newVisible:!1,drawerType:x,drawerConf:{title:"",visible:!1,type:null,info:null,open:(e,t)=>{const n=this.drawerConf;n.visible=!0,n.type=e,n.info=t,n.type===x.node?(n.title="节点",this.$refs.nodeSetting&&this.$refs.nodeSetting.resetFields(),this.$set(this.nodeSetting,"name",t.meta.name),this.$set(this.nodeSetting,"desc",t.meta.desc)):(n.title="连线",this.$refs.linkSetting&&this.$refs.linkSetting.resetFields(),this.$set(this.linkSetting,"desc",t.meta?t.meta.desc:""))},cancel:()=>{this.drawerConf.visible=!1,this.drawerConf.type===x.node?this.$refs.nodeSetting.clearValidate():this.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{desc:""},dragConf:{isDown:!1,isMove:!1,offsetTop:0,offsetLeft:0,clientX:0,clientY:0,ele:null,info:null},nodeItemList:[{label:"开始节点",value:{circularFlag:!1,width:50,height:50,id:"Rid"+Math.round(1e6*Math.random()),name:"结束节点",prop:null,status:"0",meta:{prop:"start",label:"开始",name:"开始"}}},{label:"条件节点",value:{circularFlag:!1,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"}},{label:"结束节点",value:{circularFlag:!1,width:50,height:50,id:"Rid"+Math.round(1e6*Math.random()),name:"结束节点",prop:null,status:"0",meta:{prop:"end",label:"结束",name:"结束"}}}],graphMenu:[[{label:"条件节点",disable:!1,selected:(e,t)=>{let n={circularFlag:!1,coordinate:t,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"};e.addNode(n)}}],[{label:"发送数据",selected:e=>{let t=e.toJSON(),{nodeList:n,linkList:i}=t;this.formatNode(n,i),this.formatLink(i),this.getPoints(),console.log(n),console.log(i),console.log(u),console.log(this.graph)}},{label:"全选",selected:e=>{e.selectAll()}}]],nodeMenu:[[{label:"删除",selected:e=>{e.remove()}},{label:"编辑",selected:(e,t)=>{console.log(t),this.drawerConf.open(x.node,e)}}]],linkMenu:[[{label:"删除",selected:e=>{e.remove()}},{label:"编辑",selected:e=>{this.drawerConf.open(x.link,e)}}]],linkBaseStyle:{color:"#666666",hover:"#FF0000",textColor:"#666666",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.6)"},fontList:["14px Arial","italic small-caps bold 12px arial"],nodeList:[],linkList:[],origin:[300,465]}},mounted(){document.addEventListener("mousemove",this.docMousemove),document.addEventListener("mouseup",this.docMouseup),this.$once("hook:beforeDestroy",()=>{document.removeEventListener("mousemove",this.docMousemove),document.removeEventListener("mouseup",this.docMouseup)}),this.setOriginData(),this.getData()},methods:{DoubleClick(e){console.log("this.graph___",this.graph),console.log("this.graph___",e),this.graph.nodeList.map(t=>{t.meta.name===e.name&&(console.log("双击事件___",e),t.meta.selectStatus=!1,t.meta.editStatus=!0,this.newVisible=!0,this.EditorDesc=e.desc,this.selectNode=t)})},enterIntercept(e,t,n){switch(console.log(n),t.meta.prop){default:return!0}},outputIntercept(e,t){return console.log(t),console.log(e),this.graph=t,!("end"===e.meta.prop)},async getData(){let e=await b();this.nodeList=e.nodeList,this.linkList=e.linkList,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-400,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.nodeList.map(e=>{e.meta.id=e.id}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]}),this.editStatus(),this.selectStatus()},editStatus(){this.nodeList.map(e=>{e.meta.editStatus=!1})},selectStatus(){this.nodeList.map(e=>{e.meta.selectStatus=!1})},setOriginData(){this.nodeList=m.demo2,this.linkList=m.demo1,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-600,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]})},formatNode(e){u.flowInfo.nodeList=e},formatLink(e){u.flowInfo.linkList=e},getPoints(){let e=[];this.graph.linkList.map(t=>{e.push({id:t.id,pointList:t.pathPointList.pointList})}),u.flowInfo.linkList.map(t=>{e.map(e=>{e.id===t.id&&(t.pointList=e.pointList)})}),u.flowInfo.linkList.map(e=>{e.pointList.map((t,n)=>{e.pointList[n]={x:t[0],y:t[1]}})}),this.postData()},async postData(){let e=await k(u);console.log(e)},flowNodeClick(e){console.log(e),console.log(this.$refs.superFlow.graph)},linkStyle(e){return console.log(e),{}},linkDesc(e){return e.meta?e.meta.desc:""},conformSubmit(){this.selectNode.meta.desc=this.EditorDesc,console.log("this.selectNode__",this.selectNode),console.log("nodeList__",this.nodeList),this.newVisible=!1},cancelDrawerConf(){this.newVisible=!1},settingSubmit(){const e=this.drawerConf;this.drawerConf.type===x.node?(e.info.meta||(e.info.meta={}),Object.keys(this.nodeSetting).forEach(t=>{this.$set(e.info.meta,t,this.nodeSetting[t])}),this.$refs.nodeSetting.resetFields()):(e.info.meta||(e.info.meta={}),Object.keys(this.linkSetting).forEach(t=>{this.$set(e.info.meta,t,this.linkSetting[t])}),this.$refs.linkSetting.resetFields()),e.visible=!1},docMousemove({clientX:e,clientY:t}){const n=this.dragConf;n.isMove?(n.ele.style.top=t-n.offsetTop+"px",n.ele.style.left=e-n.offsetLeft+"px"):n.isDown&&(n.isMove=Math.abs(e-n.clientX)>5||Math.abs(t-n.clientY)>5)},docMouseup({clientX:e,clientY:t}){const n=this.dragConf;if(n.isDown=!1,n.isMove){const{top:i,right:o,bottom:s,left:a}=this.$refs.flowContainer.getBoundingClientRect();if(e>a&&e<o&&t>i&&t<s){const i=this.$refs.superFlow.getMouseCoordinate(e-n.offsetLeft,t-n.offsetTop);this.$refs.superFlow.addNode({coordinate:i,...n.info})}n.isMove=!1}n.ele&&(n.ele.remove(),n.ele=null)},nodeItemMouseDown(e,t){const{clientX:n,clientY:i,currentTarget:o}=e,{top:s,left:a}=e.currentTarget.getBoundingClientRect(),l=this.dragConf,r=o.cloneNode(!0);let d={circularFlag:!1,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"};t=d,Object.assign(this.dragConf,{offsetLeft:n-a,offsetTop:i-s,clientX:n,clientY:i,info:t,ele:r,isDown:!0}),r.style.position="fixed",r.style.margin="0",r.style.top=i-l.offsetTop+"px",r.style.left=n-l.offsetLeft+"px",this.$el.appendChild(this.dragConf.ele)}}},N=$,O=(n("dd51"),Object(_["a"])(N,R,I,!1,null,null,null)),F=O.exports,A={name:"app",components:{flowDashboard:D,Demo:F},data(){return{importJson:{}}},mounted(){},methods:{async loadData(){let e=await S({id:1});console.log(e)}}},E=A,T=(n("034f"),Object(_["a"])(E,r,d,!1,null,null,null)),j=T.exports;i["default"].use(s.a),i["default"].use(l.a),i["default"].config.productionTip=!1,new i["default"]({render:e=>e(j)}).$mount("#app")},"5f06":function(e){e.exports=JSON.parse('{"nodeList":[{"id":"Rid0000201","width":"105","height":"55","coordinate":[-200,-100],"name":"结案归档","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0000201","prop":"approval","name":"结案归档","desc":"结案归档"}},{"id":"Rid0010301","width":"105.0","height":"55.0","coordinate":[-200,-200],"name":"立案阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010301","prop":"approval","name":"立案阶段","desc":"立案阶段"}},{"id":"Rid0010201S","width":"105.0","height":"55.0","coordinate":[-200,-300],"name":"诉前阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010201S","prop":"approval","name":"诉前阶段","desc":"诉前阶段"}},{"id":"Rid0000301","width":"54.0","height":"54.0","coordinate":[-200,0],"name":"结束","prop":null,"circularFlag":true,"status":"0","meta":{"id":"Rid0000301","prop":"end","name":"结束","desc":"结束"}},{"id":"Rid0000101","width":"54.0","height":"54.0","coordinate":[-174,-470],"name":"开始","prop":null,"circularFlag":true,"status":"2","meta":{"id":"Rid0000101","prop":"start","name":"开始","desc":"开始"}}],"linkList":[{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow57","startId":"Rid0000101","endId":"Rid0010201S","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow56","startId":"Rid0010201S","endId":"Rid0010301","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow53","startId":"Rid0010301","endId":"Rid0000201","meta":{"prop":"name","name":"受理","desc":"受理"},"name":"受理"},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow17","startId":"Rid0000201","endId":"Rid0000301","meta":{"prop":"name","name":null,"desc":null},"name":null}],"demo1":[{"startAt":[407,69],"endAt":[407,115],"id":"flow57","startId":"Rid0000101","endId":"Rid0010201S","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[407,170],"endAt":[480,207],"id":"flow56","startId":"Rid0010201S","endId":"Rid0010301","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[532,235],"endAt":[407,324],"id":"flow53","startId":"Rid0010301","endId":"Rid0000201","meta":{"prop":"name","name":"受理","desc":"受理"},"name":"受理"},{"startAt":[406,379],"endAt":[406,415],"id":"flow17","startId":"Rid0000201","endId":"Rid0000301","meta":{"prop":"name","name":null,"desc":null},"name":null}],"demo2":[{"id":"Rid0000201","width":"105.0","height":"55.0","coordinate":["355.0","324.0"],"name":"结案归档","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0000201","prop":"approval","name":"结案归档","desc":"结案归档"}},{"id":"Rid0010301","width":"105.0","height":"55.0","coordinate":["480.0","180.0"],"name":"立案阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010301","prop":"approval","name":"立案阶段","desc":"立案阶段"}},{"id":"Rid0010201S","width":"105.0","height":"55.0","coordinate":["355.0","115.0"],"name":"诉前阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010201S","prop":"approval","name":"诉前阶段","desc":"诉前阶段"}},{"id":"Rid0000301","width":"54.0","height":"54.0","coordinate":["380.5","435.0"],"name":"结束","prop":null,"circularFlag":true,"status":"0","meta":{"id":"Rid0000301","prop":"end","name":"结束","desc":"结束"}},{"id":"Rid0000101","width":"54.0","height":"54.0","coordinate":["380.5","15.0"],"name":"开始","prop":null,"circularFlag":true,"status":"2","meta":{"id":"Rid0000101","prop":"start","name":"开始","desc":"开始"}}]}')},"85ec":function(e,t,n){},a9db:function(e,t,n){},dd51:function(e,t,n){"use strict";var i=n("1dee"),o=n.n(i);o.a}});
//# sourceMappingURL=index.6722f06d.js.map