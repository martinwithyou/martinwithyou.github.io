(function(e){function t(t){for(var s,o,l=t[0],r=t[1],d=t[2],p=0,u=[];p<l.length;p++)o=l[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);c&&c(t);while(u.length)u.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,l=1;l<i.length;l++){var r=i[l];0!==n[r]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},n={index:0},a=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=r;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var s=i("85ec"),n=i.n(s);n.a},1189:function(e){e.exports=JSON.parse('{"modelName":"测试123","description":"测试123","companyId":"34","caseClass":"1","caseType":"1","processFlag":"1","createUser":"136","casePhaseNo":"1","agentPoint":"1","status":"1","flowInfo":{"nodeList":[],"linkList":[]}}')},"13ff":function(e,t,i){"use strict";var s=i("cf88"),n=i.n(s);n.a},"1dee":function(e,t,i){},2272:function(e,t,i){},3354:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);var s=i("5071"),n=i.n(s),a=(i("0190"),i("8c4f")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("p",{staticClass:"saveBut"},[i("lb-button",{on:{click:e.showModal}},[e._v("保存")])],1),i("div",{staticStyle:{display:"flex",height:"calc(100% - 52px)"}},[i("childtask-list",{ref:"childtask"}),i("Demo",{ref:"flow",staticClass:"flow",on:{change:e.outputData}}),i("lb-dialog",{attrs:{title:"",visible:e.visible,"close-on-click-modal":!1,"show-close":!1,width:"500px"},on:{"update:visible":function(t){e.visible=t}}},[i("lb-form",{ref:"newNodeSetting",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.conformSubmit(t)},submit:function(e){e.preventDefault()}}},[i("lb-form-item",{attrs:{label:"名称",prop:"desc"}},[i("lb-input",{attrs:{placeholder:"请输入名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),i("lb-form-item",{attrs:{label:"描述",type:"textarea",prop:"desc"}},[i("lb-input",{attrs:{placeholder:"请输入描述"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("lb-button",{on:{click:e.cancelDrawerConf}},[e._v(" 取 消 ")]),i("lb-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.conformSubmit}},[e._v(" 确 定 ")])],1)],1)],1)])},l=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"super-flow-base-demo"},[[i("super-flow",{ref:"superFlow",attrs:{"node-list":e.nodeList,"link-list":e.linkList,origin:e.origin,"graph-menu":e.graphMenuList,"node-menu":e.nodeMenuList,"link-menu":e.linkMenuList,"enter-intercept":e.enterIntercept,"output-intercept":e.outputIntercept,"link-desc":e.linkDesc},scopedSlots:e._u([{key:"node",fn:function(t){var s=t.meta;return["start"===s.prop?i("div",{staticClass:"startNode"},[i("div",{staticClass:"inner"},[i("h6",[e._v("开始")])])]):"end"===s.prop?i("div",{staticClass:"endNode"},[i("div",{staticClass:"inner"},[i("h6",[e._v("结束")])])]):i("div",{class:"flow-node otherNode",on:{click:function(t){return e.SingleClick(s)},dblclick:function(t){return e.DoubleClick(s)}}},[s.desc.length>5?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:s.desc,placement:"right"}},[s.selectStatus?i("section",{staticClass:"Active"},[e._v(" "+e._s(s.desc)+" ")]):e._e(),s.selectStatus?e._e():i("section",[e._v(" "+e._s(s.desc)+" ")])]):e._e(),s.desc.length<=5?[s.selectStatus?i("section",{staticClass:"Active"},[e._v(" "+e._s(s.desc)+" ")]):e._e(),s.selectStatus?e._e():i("section",[e._v(" "+e._s(s.desc)+" ")])]:e._e()],2)]}}])})],i("el-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[i("el-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"连线描述",prop:"desc"}},[i("el-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.drawerConf.cancel}},[e._v(" 取 消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v(" 确 定 ")])],1)],1),i("el-dialog",{attrs:{title:"节点",visible:e.newVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.newVisible=t}}},[i("el-form",{ref:"newNodeSetting",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.conformSubmit(t)},submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[i("el-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.EditorDesc,callback:function(t){e.EditorDesc=t},expression:"EditorDesc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelDrawerConf}},[e._v(" 取 消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:e.conformSubmit}},[e._v(" 确 定 ")])],1)],1)],2)},d=[],c=i("1189"),p=i("5f06"),u=i("bc3a"),m=i.n(u),f=i("5f72");const h="http://192.168.0.155:8083",g=m.a.create({baseURL:h,timeout:5e4});g.interceptors.request.use(e=>(window.require?e.headers["token"]=localStorage.getItem("token"):(e.headers["platform"]="PC",e.headers["version"]="1.9.0",e.headers["token"]="d00b71526037da46ab12100de89343e4"),e),e=>(console.log(e),Promise.reject(e))),g.interceptors.response.use(e=>{const t=e.data;return t},e=>(console.log("err"+e),Object(f["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)));var b=g;function v(e){return b({url:"/activitiModeler/service/model/7050005"+e,method:"get",params:{}})}function k(e){return b({url:"/activitiModeler/service//model/save",method:"post",data:e})}const y={node:0,link:1};var S={data(){return{selectNode:{},EditorDesc:"",newVisible:!1,graph:{},drawerType:y,drawerConf:{title:"",visible:!1,type:null,info:null,open:(e,t)=>{const i=this.drawerConf;i.visible=!0,i.type=e,i.info=t,i.type===y.node?(i.title="节点",this.$refs.nodeSetting&&this.$refs.nodeSetting.resetFields(),this.$set(this.nodeSetting,"name",t.meta.name),this.$set(this.nodeSetting,"desc",t.meta.desc)):(i.title="连线",this.$refs.linkSetting&&this.$refs.linkSetting.resetFields(),this.$set(this.linkSetting,"desc",t.meta?t.meta.desc:""))},cancel:()=>{this.drawerConf.visible=!1,this.drawerConf.type===y.node?this.$refs.nodeSetting.clearValidate():this.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{name:"",desc:""},origin:[300,465],nodeList:[],linkList:[],graphMenuList:[[{label:"开始节点",disable(e){return!!e.nodeList.find(e=>"start"===e.meta.prop)},selected:(e,t)=>{const i=e.nodeList.find(e=>"start"===e.meta.prop);i||e.addNode({width:100,height:80,coordinate:t,meta:{prop:"start",name:"开始节点"}})}},{label:"条件节点",disable:!1,selected:(e,t)=>{let i={circularFlag:!1,coordinate:t,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"};e.addNode(i),console.log("graph_____",e)}},{label:"结束节点",disable(e){return!!e.nodeList.find(e=>"end"===e.meta.prop)},selected:(e,t)=>{e.addNode({width:80,height:50,coordinate:t,meta:{prop:"end",name:"结束节点"}})}}],[{label:"发送数据",selected:e=>{let t=e.toJSON(),{nodeList:i,linkList:s}=t;this.formatNode(i,s),this.formatLink(s),this.getPoints(),console.log(i),console.log(s),console.log(c),console.log(this.graph)}},{label:"全选",selected:(e,t)=>{console.log(t),e.selectAll()}}]],nodeMenuList:[[{label:"删除",disable:!1,hidden(e){return"start"===e.meta.prop},selected(e,t){console.log(t),e.remove()}}],[{label:"编辑",selected:(e,t)=>{console.log(t),console.log("drawerType.node___",y.node),console.log("node___",e),this.drawerConf.open(y.node,e)}}]],linkMenuList:[[{label:"删除",disable:!1,selected:(e,t)=>{console.log(t),e.remove()}}],[{label:"编辑",disable:!1,selected:(e,t)=>{console.log(t),this.drawerConf.open(y.link,e)}}]]}},created(){},mounted(){this.setOriginData(),this.getData()},methods:{async getData(){let e=await v();this.nodeList=e.nodeList,this.linkList=e.linkList,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-400,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.nodeList.map(e=>{e.meta.id=e.id}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]}),this.editStatus(),this.selectStatus()},setOriginData(){this.nodeList=p.demo2,this.linkList=p.demo1,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-600,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]})},conformSubmit(){this.selectNode.meta.desc=this.EditorDesc,this.newVisible=!1},cancelDrawerConf(){this.newVisible=!1},DoubleClick(e){this.nodeList.map(t=>{t.id===e.id&&(console.log("双击事件___",e),t.meta.selectStatus=!1,t.meta.editStatus=!0,this.newVisible=!0,this.EditorDesc=e.desc,this.selectNode=t)})},SingleClick(e){this.nodeList.map(t=>{t.id===e.id&&(t.meta.selectStatus=!t.meta.selectStatus,console.log("单击事件___",t),this.selectNode=t)})},editStatus(){this.nodeList.map(e=>{e.meta.editStatus=!1})},selectStatus(){this.nodeList.map(e=>{e.meta.selectStatus=!1})},enterIntercept(e,t,i){console.log(i);const s=e.meta.prop;switch(t.meta.prop){case"start":return!1;case"approval":return["start","approval","condition","cc"].includes(s);case"condition":return["start","approval","condition","cc"].includes(s);case"end":return["start","approval","condition","cc"].includes(s);default:return!0}},outputIntercept(e,t){return console.log(t),console.log(e),this.graph=t,!("end"===e.meta.prop)},linkDesc(e){return e.meta?e.meta.desc:""},settingSubmit(){const e=this.drawerConf;this.drawerConf.type===y.node?(e.info.meta||(e.info.meta={}),Object.keys(this.nodeSetting).forEach(t=>{this.$set(e.info.meta,t,this.nodeSetting[t])}),this.$refs.nodeSetting.resetFields()):(e.info.meta||(e.info.meta={}),Object.keys(this.linkSetting).forEach(t=>{this.$set(e.info.meta,t,this.linkSetting[t])}),this.$refs.linkSetting.resetFields()),e.visible=!1},formatNode(e){c.flowInfo.nodeList=e},formatLink(e){c.flowInfo.linkList=e},getPoints(){let e=[];this.graph.linkList.map(t=>{e.push({id:t.id,pointList:t.pathPointList.pointList})}),c.flowInfo.linkList.map(t=>{e.map(e=>{e.id===t.id&&(t.pointList=e.pointList)})}),c.flowInfo.linkList.map(e=>{e.pointList.map((t,i)=>{e.pointList[i]={x:t[0],y:t[1]}})}),this.postData()},async postData(){let e=await k(c);console.log(e)}}},w=S,_=(i("86fc"),i("2877")),C=Object(_["a"])(w,r,d,!1,null,"510a58f4",null),L=C.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"childtask_list"},[i("lb-container",{attrs:{height:"100%"}},[i("lb-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.Stagelist,(function(t,s){return i("lb-collapse-item",{key:t.id,staticClass:"caseitem",attrs:{name:t.id}},[i("template",{slot:"title"},[i("lb-tooltip",{attrs:{content:t.name,placement:"top"}},[[i("span",{staticClass:"CaseStageList-title"},[e._v(e._s(t.name)+" ")])]],2),i("lb-tooltip",{staticStyle:{float:"right","margin-right":"10px","margin-top":"5px"},attrs:{content:"自定义字段",placement:"top"}},[[i("a",{staticClass:"hovera",on:{click:function(i){return i.stopPropagation(),e.addZi(t)}}},[i("img",{staticClass:"hover_show",attrs:{src:"zidingyi_low.svg"}}),i("img",{staticClass:"hover_hidden",attrs:{src:"zidingyi.svg"}})])]],2),i("el-popover",{ref:s,refInFor:!0,attrs:{placement:"bottom",trigger:"manual",width:"400","popper-class":"noPadPop"},model:{value:e.openList[s],callback:function(t){e.$set(e.openList,s,t)},expression:"openList[indexs]"}},[i("p",{staticClass:"el-dialog__header"},[e._v("设置提醒")]),i("p",{staticClass:"titles"},[i("span",[e._v("任务")]),i("span",[e._v("时间")])]),i("div",{staticClass:"padp"},[i("div",{staticClass:"remind_info"},[i("span",{staticClass:"comline"},[e._v("当")]),i("lb-select",{staticStyle:{width:"160px"},model:{value:t.remindSetEntity.basePoint,callback:function(i){e.$set(t.remindSetEntity,"basePoint",i)},expression:"item.remindSetEntity.basePoint"}},e._l(e.stepList,(function(e){return i("lb-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1),i("lb-input",{staticStyle:{width:"60px"},model:{value:t.remindSetEntity.afterTime,callback:function(i){e.$set(t.remindSetEntity,"afterTime",i)},expression:"item.remindSetEntity.afterTime"}}),i("lb-select",{staticStyle:{width:"65px"},model:{value:t.remindSetEntity.afterTimeUnit,callback:function(i){e.$set(t.remindSetEntity,"afterTimeUnit",i)},expression:"item.remindSetEntity.afterTimeUnit"}},e._l(e.timeList,(function(e){return i("lb-option",{key:e.dicKey,attrs:{label:e.dicValue,value:e.dicKey}})})),1),i("span",{staticClass:"comline"},[e._v("提醒")])],1),i("p",{staticClass:"remind_info"},[i("lb-checkbox",{staticStyle:{"line-height":"40px",padding:"0 10px"},on:{change:function(e){t.remindSetEntity.remindItemSet.repeatFlag?t.remindSetEntity.remindItemSet.repeatType="1":t.remindSetEntity.remindItemSet.repeatType="0"}},model:{value:t.remindSetEntity.remindItemSet.repeatFlag,callback:function(i){e.$set(t.remindSetEntity.remindItemSet,"repeatFlag",i)},expression:"item.remindSetEntity.remindItemSet.repeatFlag"}},[e._v("重复")]),t.remindSetEntity.remindItemSet.repeatFlag?i("lb-select",{staticStyle:{width:"112px"},model:{value:t.remindSetEntity.remindItemSet.repeatType,callback:function(i){e.$set(t.remindSetEntity.remindItemSet,"repeatType",i)},expression:"item.remindSetEntity.remindItemSet.repeatType"}},e._l(e.repeatTypeList,(function(e){return i("lb-option",{key:e.dicKey,attrs:{label:e.dicValue,value:e.dicKey}})})),1):e._e(),4==t.remindSetEntity.remindItemSet.repeatType?i("lb-input",{staticStyle:{width:"60px"},model:{value:t.remindSetEntity.remindItemSet.intervalDays,callback:function(i){e.$set(t.remindSetEntity.remindItemSet,"intervalDays",i)},expression:"item.remindSetEntity.remindItemSet.intervalDays"}}):e._e(),4==t.remindSetEntity.remindItemSet.repeatType?i("span",{staticClass:"comline"},[e._v("天")]):e._e()],1),i("p",{staticClass:"dialogcenter"},[i("lb-button",{staticStyle:{"margin-right":"20px"},attrs:{plain:""},on:{click:function(t){return e.$set(e.openList,s,!1)}}},[e._v("取消")]),i("lb-button",{on:{click:function(t){return e.$set(e.openList,e.index,!1)}}},[e._v("确定")])],1)]),i("a",{staticClass:"hovera",staticStyle:{float:"right","margin-top":"5px","margin-right":"10px"},attrs:{slot:"reference"},on:{click:function(t){return t.stopPropagation(),e.$set(e.openList,s,!0)}},slot:"reference"},[i("img",{staticClass:"hover_show",attrs:{src:"sets_low.svg"}}),i("img",{staticClass:"hover_hidden",attrs:{src:"sets.svg"}})])])],1),t.list.length>0?i("draggable",e._b({staticClass:"backs",attrs:{tag:"div"},on:{start:function(t){e.isDragging=!0},end:function(i){e.isDragging=!1,e.draggabletask(t.list)}},model:{value:t.list,callback:function(i){e.$set(t,"list",i)},expression:"item.list"}},"draggable",e.dragOptions,!1),[i("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(t.list,(function(s,n){return i("div",{key:n,on:{mouseenter:function(t){e.moveindex=n},mouseleave:function(t){e.moveindex="-1"}}},[i("div",{staticClass:"CaseStageList-task-left"}),i("div",[i("div",{staticClass:"CaseStageList-task-right-r zhuseHover"},[i("lb-tooltip",{attrs:{content:s.taskDetailName,placement:"top"}},[[i("span",[e._v(e._s(s.taskDetailName))])]],2),i("a",{staticClass:"hovera",on:{click:function(i){return e.deleteTask(s,t.list)}}},[i("img",{staticClass:"hover_show",attrs:{src:"icondele.svg"}}),i("img",{staticClass:"hover_hidden",attrs:{src:"icondele_hover.svg"}})]),i("a",{staticClass:"hovera",on:{click:function(t){return e.editTask(s)}}},[i("img",{staticClass:"hover_show",attrs:{src:"bianji1.svg"}}),i("img",{staticClass:"hover_hidden",attrs:{src:"bianji2.svg"}})]),i("el-popover",{ref:n,refInFor:!0,attrs:{placement:"bottom",trigger:"click",width:"400","popper-class":"noPadPop"}},[i("p",{staticClass:"el-dialog__header"},[e._v("设置提醒")]),i("div",{staticClass:"padp"},[i("div",{staticClass:"remind_info"},[i("span",{staticClass:"comline"},[e._v("当")]),i("lb-select",{staticStyle:{width:"160px"},model:{value:s.remindSetEntity.basePoint,callback:function(t){e.$set(s.remindSetEntity,"basePoint",t)},expression:"items.remindSetEntity.basePoint"}},e._l(e.stepList,(function(e){return i("lb-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1),i("lb-input",{staticStyle:{width:"60px"},model:{value:s.remindSetEntity.afterTime,callback:function(t){e.$set(s.remindSetEntity,"afterTime",t)},expression:"items.remindSetEntity.afterTime"}}),i("lb-select",{staticStyle:{width:"65px"},model:{value:s.remindSetEntity.afterTimeUnit,callback:function(t){e.$set(s.remindSetEntity,"afterTimeUnit",t)},expression:"items.remindSetEntity.afterTimeUnit"}},e._l(e.timeList,(function(e){return i("lb-option",{key:e.dicKey,attrs:{label:e.dicValue,value:e.dicKey}})})),1),i("span",{staticClass:"comline"},[e._v("提醒")])],1),i("p",{staticClass:"remind_info"},[i("lb-checkbox",{staticStyle:{"line-height":"40px",padding:"0 10px"},on:{change:function(e){s.remindSetEntity.remindItemSet.repeatFlag?s.remindSetEntity.remindItemSet.repeatType="1":s.remindSetEntity.remindItemSet.repeatType="0"}},model:{value:s.remindSetEntity.remindItemSet.repeatFlag,callback:function(t){e.$set(s.remindSetEntity.remindItemSet,"repeatFlag",t)},expression:"items.remindSetEntity.remindItemSet.repeatFlag"}},[e._v("重复")]),s.remindSetEntity.remindItemSet.repeatFlag?i("lb-select",{staticStyle:{width:"112px"},model:{value:s.remindSetEntity.remindItemSet.repeatType,callback:function(t){e.$set(s.remindSetEntity.remindItemSet,"repeatType",t)},expression:"items.remindSetEntity.remindItemSet.repeatType"}},e._l(e.repeatTypeList,(function(e){return i("lb-option",{key:e.dicKey,attrs:{label:e.dicValue,value:e.dicKey}})})),1):e._e(),4==s.remindSetEntity.remindItemSet.repeatType?i("lb-input",{staticStyle:{width:"60px"},model:{value:s.remindSetEntity.remindItemSet.intervalDays,callback:function(t){e.$set(s.remindSetEntity.remindItemSet,"intervalDays",t)},expression:"items.remindSetEntity.remindItemSet.intervalDays"}}):e._e(),4==s.remindSetEntity.remindItemSet.repeatType?i("span",{staticClass:"comline"},[e._v("天")]):e._e()],1),i("p",{staticClass:"dialogcenter"},[i("lb-button",{staticStyle:{"margin-right":"20px"},attrs:{plain:""}},[e._v("取消")]),i("lb-button",[e._v("确定")])],1)]),i("a",{staticClass:"hovera",attrs:{slot:"reference"},slot:"reference"},[i("img",{staticClass:"hover_show",attrs:{src:"sets_low.svg"}}),i("img",{staticClass:"hover_hidden",attrs:{src:"sets.svg"}})])])],1)]),i("div",{staticClass:"beise"},[e._l(s.taskCheckList,(function(t){return i("p",{staticClass:"list"},[e._v(e._s(t))])})),i("p",{staticClass:"zhuseHover check_hover checkLitts"},[s.isaddCheck?i("span",[i("lb-input",{attrs:{maxlength:20,"show-word-limit":""},on:{enter:function(t){return e.addCheck(s)}},model:{value:s.onecheck,callback:function(t){e.$set(s,"onecheck",t)},expression:"items.onecheck"}})],1):i("span",{on:{click:function(t){return e.$set(s,"isaddCheck",!0)}}},[i("img",{staticClass:"a-check",attrs:{src:"a-check.svg"}}),i("img",{staticClass:"a-checks",attrs:{src:"a-check-s.svg"}}),e._v("添加检查项")])])],2)])})),0)],1):e._e(),i("div",{staticClass:"CaseStageList-next"},[i("div",[i("p",[i("span",{staticClass:"add_tasks",on:{click:function(t){return e.addTask(s)}}},[i("i",{staticClass:"el-icon-circle-plus"}),e._v("添加子任务")])])])])],2)})),1)],1),i("lb-dialog",{staticClass:"heightFullDialog",attrs:{title:"添加子任务",visible:e.isAdd,width:"500px"},on:{"update:visible":function(t){e.isAdd=t}}},[i("add-task",{ref:"add_task",on:{saveTask:e.saveTask}})],1),i("lb-dialog",{staticClass:"heightFullDialog",attrs:{title:"自定义字段",visible:e.isZid,width:"500px"},on:{"update:visible":function(t){e.isZid=t}}},[i("field",{ref:"fields",attrs:{list:e.colList}})],1)],1)},T=[];const I=m.a.create({baseURL:"http://192.168.0.155:8083"});I.interceptors.request.use(e=>(window.require?e.headers["token"]=localStorage.getItem("token"):(e.headers["platform"]="PC",e.headers["version"]="1.9.0",e.headers["token"]="d00b71526037da46ab12100de89343e4"),e),e=>{console.log(e),Promise.reject(e)}),I.interceptors.response.use(e=>e,e=>(console.log("err"+e),Promise.reject(e)));var $=I;const D=m.a.create({baseURL:"https://test.lawbal.com/lvbao"});D.interceptors.request.use(e=>(window.require?e.headers["token"]=localStorage.getItem("token"):(e.headers["platform"]="PC",e.headers["version"]="1.9.0",e.headers["token"]="d00b71526037da46ab12100de89343e4"),e),e=>{console.log(e),Promise.reject(e)}),D.interceptors.response.use(e=>e,e=>(console.log("err"+e),Promise.reject(e)));var E=D;function F(e,t,i,s){return $({url:e,method:"post",data:t}).then(n=>{R(n,e,t,i,s)})}function M(e,t,i,s){return E({url:e,method:"post",data:t}).then(n=>{R(n,e,t,i,s)})}function N(e,t,i,s){return E({url:e,method:"get",params:t}).then(n=>{R(n,e,t,i,s)})}function R(e,t,i,s,n){0==e.data.code?s(e.data):n(e.data)}var A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add_task"},[i("lb-container",{attrs:{height:"calc(100% - 72px"}},[i("lb-form",{ref:"info",attrs:{"lablb-position":"top","lablb-width":"80px",model:e.info}},[i("lb-form-item",{staticClass:"no_label",attrs:{label:" ",prop:"taskDetailName",rules:[{required:!0,message:"请输入子任务名",trigger:"blur"}]}},[i("lb-input",{attrs:{placeholder:"请输入任务名称"},model:{value:e.info.taskDetailName,callback:function(t){e.$set(e.info,"taskDetailName",t)},expression:"info.taskDetailName"}})],1),i("lb-form-item",{attrs:{label:"任务描述"}},[i("lb-input",{attrs:{placeholder:"请输入任务描述",type:"textarea"},model:{value:e.info.taskDescribe,callback:function(t){e.$set(e.info,"taskDescribe",t)},expression:"info.taskDescribe"}})],1),i("p",[e._v("检查项")]),e._l(e.info.taskCheckList,(function(t){return i("p",{staticClass:"checkLitts"},[e._v(e._s(t))])})),i("p",{staticClass:"zhuseHover check_hover checkLitts",on:{click:function(t){e.isAdd_check=!0},mouseover:function(t){e.ischeck=!0},mouseleave:function(t){e.ischeck=!1}}},[e.ischeck?i("img",{attrs:{src:"a-check-s.svg"}}):i("img",{attrs:{src:"a-check.svg"}}),e._v("添加检查项")])],2)],1),i("p",{staticClass:"dialogcenter"},[i("lb-button",{on:{click:function(t){return e.saveTask("info")}}},[e._v("确定")])],1),i("lb-dialog",{attrs:{title:"添加检查项","append-to-body":"",visible:e.isAdd_check,width:"400px"},on:{"update:visible":function(t){e.isAdd_check=t}}},[i("p",[i("lb-input",{attrs:{placeholder:"请输入检查项"},model:{value:e.checkInfo,callback:function(t){e.checkInfo=t},expression:"checkInfo"}})],1),i("p",{staticClass:"dialogcenter"},[i("lb-button",{on:{click:e.addCheck}},[e._v("保存")])],1)])],1)},O=[],P={name:"add_task",components:{},data(){return{info:{taskDetailName:"",taskDescribe:"",taskCheckList:[],remindSetEntity:{afterTime:"",afterTimeUnit:"",basePoint:"",remindItemSet:{repeatFlag:!1,repeatType:"0",repeatCount:"",repeatDeadline:"",intervalDays:""}}},checkInfo:"",isAdd_check:!1,ischeck:!1,type:"l",isSet:!1}},mounted(){},methods:{addCheck(){this.info.taskCheckList.push(this.checkInfo),this.isAdd_check=!1,this.checkInfo=""},saveTask(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;this.$emit("saveTask",this.info),this.info={taskDetailName:"",taskDescribe:"",taskCheckList:[],remindSetEntity:{afterTime:"",afterTimeUnit:"",basePoint:"",remindItemSet:{repeatFlag:!1,repeatType:"0",repeatCount:"",repeatDeadline:"",intervalDays:""}}}})}}},V=P,j=(i("a5b4"),i("9785"),Object(_["a"])(V,A,O,!1,null,null,null)),K=j.exports,q=(i("310e"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"field"},[e.isAdd?e._e():i("div",{staticClass:"mains"},[i("p",{staticClass:"titles"},[e._v("已有字段 "),i("span",{staticClass:"add_new",on:{click:e.addTrue}},[i("i",{staticClass:"el-icon-circle-plus"}),e._v("添加字段")])]),i("lb-table",{staticStyle:{width:"100%"},attrs:{data:e.colList,fit:""},on:{"row-click":e.editZi}},[i("lb-table-column",{attrs:{prop:"collectTime",label:"字段名"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(t.row.fieldName))])]}}],null,!1,698275199)}),i("lb-table-column",{attrs:{prop:"countCaseCount",label:"字段类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticClass:"norwarpCase",attrs:{title:t.row.fieldTypeName}},[e._v(" "+e._s(e.getType(t.row.fieldType))+" ")])]}}],null,!1,723584461)}),i("lb-table-column",{attrs:{prop:"countCaseCount",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticClass:"zhuseHover",on:{click:function(i){return i.stopPropagation(),e.deleteZiduan(t.row.customerFieldSetId,t.row)}}},[e._v(" 删除 ")])]}}],null,!1,3702401436)})],1)],1),e.isAdd?i("div",{staticClass:"leftTime"},[i("lb-container",{attrs:{height:"calc(100% - 72px)"}},[i("p",{staticClass:"titles"},[e._v("添加字段")]),i("p",{staticClass:"marGb"},[i("lb-input",{attrs:{placeholder:"名称"},model:{value:e.info.fieldName,callback:function(t){e.$set(e.info,"fieldName",t)},expression:"info.fieldName"}})],1),i("p",{staticClass:"marGb"},[i("lb-select",{staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!1},model:{value:e.info.fieldType,callback:function(t){e.$set(e.info,"fieldType",t)},expression:"info.fieldType"}},e._l(e.addlist,(function(t){return 7!=t.dicKey&&6!=t.dicKey?i("lb-option",{key:t.dicKey,attrs:{label:t.dicValue,value:t.dicKey}}):e._e()})),1)],1),3==e.info.fieldType||4==e.info.fieldType||8==e.info.fieldType?i("p",{staticClass:"marGb zhuseHover",on:{click:e.addOption}},[e._v("+添加选项 ")]):e._e(),e._l(e.info.optionList,(function(t,s){return 3==e.info.fieldType||4==e.info.fieldType||8==e.info.fieldType?i("p",{key:s,staticClass:"marGb"},[i("lb-input",{attrs:{placeholder:"选项"},model:{value:t.optionValue,callback:function(i){e.$set(t,"optionValue",i)},expression:"item.optionValue"}})],1):e._e()})),i("p",{staticClass:"marGb"},[i("lb-input",{attrs:{placeholder:"字段说明",type:"textarea"},model:{value:e.info.remark,callback:function(t){e.$set(e.info,"remark",t)},expression:"info.remark"}})],1),i("p",{staticClass:"marGb"},[i("lb-checkbox",{model:{value:e.info.mustFlag,callback:function(t){e.$set(e.info,"mustFlag",t)},expression:"info.mustFlag"}},[e._v("必填")])],1)],2),i("p",{staticClass:"dialogcenter",staticStyle:{"padding-bottom":"100px"}},[i("lb-button",{staticStyle:{"margin-right":"20px"},attrs:{plain:""},on:{click:function(t){e.isAdd=!1}}},[e._v("取消")]),i("lb-button",{on:{click:e.save}},[e._v("添加")])],1)],1):e._e()])}),U=[],B={name:"add_task",components:{},data(){return{isAdd:!1,colList:[],info:{teamId:"34",fieldName:"",fieldType:"1",caseType:"",caseClass:"",type:2,remark:"",mustFlag:!1,minLimit:null,maxLimit:null,optionList:[]},addlist:[],allList:[]}},mounted(){this.getAddList()},methods:{getAddList(){let e=this;N("system/sysDictionary/list",{companyId:"34",type:"0080"},(function(t){e.addlist=t.list}),(function(e){}))},save(){this.colList.push(this.info),this.info={teamId:"34",fieldName:"",fieldType:"1",caseType:"",caseClass:"",type:2,remark:"",mustFlag:!1,minLimit:null,maxLimit:null,optionList:[]},this.isAdd=!1},addOption(){this.info.optionList.push({optionValue:"",optionKey:""})},deleteZiduan(e,t){let i=this;this.$confirm("此操作将删除该字段, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if(e)for(let s of i.allList)s.customerFieldSetId==e&&(i.allList.splice(i.allList.indexOf(s),1),i.colList.splice(i.colList.indexOf(t),1));else i.colList.splice(i.colList.indexOf(t),1);i.$message({type:"info",message:"已删除"})}).catch(()=>{i.$message({type:"info",message:"已取消删除"})})},editZi(e){this.isAdd=!0,this.info=e},addTrue(){this.isAdd=!0,this.info={teamId:"34",fieldName:"",fieldType:"1",caseType:"",caseClass:"",type:2,remark:"",mustFlag:!1,minLimit:null,maxLimit:null,optionList:[]}},getType(e){for(let t of this.addlist)if(t.dicKey==e)return t.dicValue}}},Z=B,z=(i("13ff"),Object(_["a"])(Z,q,U,!1,null,null,null)),J=z.exports,G={name:"childtask_list",components:{addTask:K,field:J},data(){return{activeName:[],Stagelist:[],isAdd:!1,itemindex:"",onecheck:"",ischeck:!1,isEdit:!1,stepList:[],timeList:[{dicKey:"1",dicValue:"天"},{dicKey:"2",dicValue:"周"},{dicKey:"3",dicValue:"月"},{dicKey:"4",dicValue:"季度"},{dicKey:"5",dicValue:"年"}],repeatTypeList:[{dicKey:"1",dicValue:"每天"},{dicKey:"2",dicValue:"每周"},{dicKey:"3",dicValue:"每月"},{dicKey:"4",dicValue:"自定义"}],isSet:!1,isZid:!1,openList:[],openLists:[[]],colList:[]}},mounted(){this.getList(),this.getStep(1),this.getCoList()},computed:{dragOptions(){return{animation:1,disabled:!1,ghostClass:"ghost"}}},methods:{getStep(e){M("customer/field/set/fieldField",{caseClass:"l"==this.type?1:2,caseType:e},e=>{this.stepList=e.list},e=>{})},getList(){let e=this;console.log(this.$route),F("/activitiModeler/getChildTaskByPhase?modelId="+this.$route.query.modelId,{},(function(t){e.Stagelist=t.data;for(let i of e.Stagelist){i.remindSetEntity=i.remindSetEntity?i.remindSetEntity:{afterTime:"",afterTimeUnit:"1",basePoint:"",remindItemSet:{repeatFlag:!1,repeatType:"0",repeatCount:"",repeatDeadline:"",intervalDays:""}},i.list=i.list?i.list:[];for(let e of i.list)e.remindSetEntity=e.remindSetEntity?e.remindSetEntity:{afterTime:"",afterTimeUnit:"1",basePoint:"",remindItemSet:{repeatFlag:!1,repeatType:"0",repeatCount:"",repeatDeadline:"",intervalDays:""}}}}),(function(e){this.$message({type:"error",message:e.msg})}))},addTask(e){this.isAdd=!0,this.isEdit=!1,this.itemindex=e},saveTask(e){this.isEdit||this.Stagelist[this.itemindex].list.push(e),this.isAdd=!1,console.log(this.Stagelist)},addCheck(e){e.taskCheckList.push(e.onecheck),e.isaddCheck=!1,e.onecheck=""},deleteTask(e,t){this.$confirm("是否确定删除该子任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.splice(t.indexOf(e),1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},editTask(e){this.isAdd=!0,this.isEdit=!0,this.$nextTick((function(){this.$refs.add_task.info=e}))},getBase(e){for(let t of this.stepList)if(t.key==e)return t.value},getDay(e){for(let t of this.timeList)if(e==t.dicKey)return t.dicValue},addZi(e){let t=this;e.id?t.isZid=!0:this.isZid=!0},getCoList(){let e=this;F("/activitiModeler/getCustomerField?modelId=5732501&companyId=34",{},(function(t){e.colList=t.data}),(function(e){}))}}},H=G,X=(i("5d57"),i("d124"),Object(_["a"])(H,x,T,!1,null,null,null)),Y=X.exports,Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"super-flow-demo1"},[i("div",{staticClass:"node-container"},e._l(e.nodeItemList,(function(t,s){return i("span",{key:s,staticClass:"node-item",on:{mousedown:function(i){return e.nodeItemMouseDown(i,t.value)}}},[e._v(" "+e._s(t.label)+" ")])})),0),i("div",{ref:"flowContainer",staticClass:"flow-container"},[i("super-flow",{ref:"superFlow",attrs:{"node-list":e.nodeList,"link-list":e.linkList,origin:e.origin,"graph-menu":e.graphMenu,"node-menu":e.nodeMenu,"link-menu":e.linkMenu,"link-base-style":e.linkBaseStyle,"link-style":e.linkStyle,"link-desc":e.linkDesc,"enter-intercept":e.enterIntercept,"output-intercept":e.outputIntercept,markLineColor:e.themeColor},scopedSlots:e._u([{key:"node",fn:function(t){var s=t.meta;return["start"===s.prop?i("div",{staticClass:"startNode"},[i("div",{staticClass:"inner"},[i("h6",[e._v("开始")])])]):"end"===s.prop?i("div",{staticClass:"endNode"},[i("div",{staticClass:"inner"},[i("h6",[e._v("结束")])])]):i("div",{staticClass:"flow-node",on:{dblclick:function(t){return e.DoubleClick(s)}}},[s.desc.length>5?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:s.desc,placement:"right"}},[i("section",[e._v(" "+e._s(s.desc)+" ")])]):e._e(),s.desc.length<=5?[i("section",[e._v(" "+e._s(s.desc)+" ")])]:e._e()],2)]}}])})],1)]),i("lb-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,"show-close":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[i("lb-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting}},[i("lb-form-item",{attrs:{label:"节点描述",prop:"desc"}},[i("lb-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),i("lb-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting}},[i("lb-form-item",{attrs:{label:"连线描述",prop:"desc"}},[i("lb-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("lb-button",{on:{click:e.drawerConf.cancel}},[e._v(" 取 消 ")]),i("lb-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v(" 确 定 ")])],1)],1),i("lb-dialog",{attrs:{title:"节点",visible:e.newVisible,"close-on-click-modal":!1,"show-close":!1,width:"500px"},on:{"update:visible":function(t){e.newVisible=t}}},[i("lb-form",{ref:"newNodeSetting",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.conformSubmit(t)},submit:function(e){e.preventDefault()}}},[i("lb-form-item",{attrs:{label:"节点描述",prop:"desc"}},[i("lb-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.EditorDesc,callback:function(t){e.EditorDesc=t},expression:"EditorDesc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("lb-button",{on:{click:e.cancelDrawerConf}},[e._v(" 取 消 ")]),i("lb-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.conformSubmit}},[e._v(" 确 定 ")])],1)],1)],1)},W=[];const ee={node:0,link:1};var te={data(){return{addItemList:[],postData:c,themeColor:"#2e6e75",selectNode:{},EditorDesc:"",newVisible:!1,drawerType:ee,drawerConf:{title:"",visible:!1,type:null,info:null,open:(e,t)=>{const i=this.drawerConf;i.visible=!0,i.type=e,i.info=t,i.type===ee.node?(i.title="节点",this.$refs.nodeSetting&&this.$refs.nodeSetting.resetFields(),this.$set(this.nodeSetting,"name",t.meta.name),this.$set(this.nodeSetting,"desc",t.meta.desc)):(i.title="连线",this.$refs.linkSetting&&this.$refs.linkSetting.resetFields(),this.$set(this.linkSetting,"desc",t.meta?t.meta.desc:""))},cancel:()=>{this.drawerConf.visible=!1,this.drawerConf.type===ee.node?this.$refs.nodeSetting.clearValidate():this.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{desc:""},dragConf:{isDown:!1,isMove:!1,offsetTop:0,offsetLeft:0,clientX:0,clientY:0,ele:null,info:null},nodeItemList:[{label:"开始",value:{circularFlag:!1,width:50,height:50,id:"Rid"+Math.round(1e6*Math.random()),name:"开始",prop:null,status:"0",meta:{prop:"start",label:"开始",name:"开始"}}},{label:"条件",value:{circularFlag:!1,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"}},{label:"结束",value:{circularFlag:!1,width:50,height:50,id:"Rid"+Math.round(1e6*Math.random()),name:"结束",prop:null,status:"0",meta:{prop:"end",label:"结束",name:"结束"}}}],graphMenu:[[{label:"新增条件节点",disable:!1,selected:(e,t)=>{let i={circularFlag:!1,coordinate:t,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"};e.addNode(i)}}],[{label:"全选",selected:e=>{e.selectAll()}}]],nodeMenu:[[{label:"删除",selected:e=>{e.remove(),this.$emit("change",this.postData)}},{label:"编辑",selected:(e,t)=>{console.log(t),this.drawerConf.open(ee.node,e)}}]],linkMenu:[[{label:"删除",selected:e=>{e.remove()}},{label:"编辑",selected:e=>{this.drawerConf.open(ee.link,e)}}]],linkBaseStyle:{color:"#666666",hover:"#FF0000",textColor:"#666666",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.6)"},fontList:["14px Arial","italic small-caps bold 12px arial"],nodeList:[],linkList:[],origin:[300,465]}},mounted(){document.addEventListener("mousemove",this.docMousemove),document.addEventListener("mouseup",this.docMouseup),this.$once("hook:beforeDestroy",()=>{document.removeEventListener("mousemove",this.docMousemove),document.removeEventListener("mouseup",this.docMouseup)}),this.setOriginData(),this.getParam(),this.getData()},methods:{getParam(){this.$route.query.isNew,console.log("true"===this.$route.query.isNew)},DoubleClick(e){console.log("this.graph___",this.graph),console.log("this.graph___",e),this.graph.nodeList.map(t=>{t.meta.name===e.name&&(console.log("双击事件___",e),t.meta.selectStatus=!1,t.meta.editStatus=!0,this.newVisible=!0,this.EditorDesc=e.desc,this.selectNode=t)})},enterIntercept(e,t,i){switch(console.log(i),t.meta.prop){default:return!0}},outputIntercept(e,t){console.log(t),console.log(e),this.graph=t;let i=t.toJSON(),{nodeList:s,linkList:n}=i;return this.formatNode(s,n),this.formatLink(n),this.getPoints(),!("end"===e.meta.prop)},async getData(){let e=this.$route.query,t="?";if("true"===this.$route.query.isNew){e.modelId="true";for(let i in e)t+=`${i}=${e[i]}&`}else for(let s in e)t+=`${s}=${e[s]}&`;let i=await v(t);this.nodeList=i.data.nodeList,this.linkList=i.data.linkList,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-400,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.nodeList.map(e=>{e.meta.id=e.id}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]}),this.editStatus(),this.selectStatus()},editStatus(){this.nodeList.map(e=>{e.meta.editStatus=!1})},selectStatus(){this.nodeList.map(e=>{e.meta.selectStatus=!1})},setOriginData(){this.nodeList=p.demo2,this.linkList=p.demo1,this.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-600,e.coordinate[1]=parseInt(e.coordinate[1])-400}),this.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]})},formatNode(e){c.flowInfo.nodeList=e},formatLink(e){c.flowInfo.linkList=e},getPoints(){let e=[];this.graph.linkList.map(t=>{e.push({id:t.id,pointList:t.pathPointList.pointList})}),c.flowInfo.linkList.map(t=>{e.map(e=>{e.id===t.id&&(t.pointList=e.pointList)})}),c.flowInfo.linkList.map(e=>{e.pointList.map((t,i)=>{e.pointList[i]={x:t[0],y:t[1]}})}),this.postData=c,console.log("this.postData___",this.postData),this.$emit("change",this.postData)},async postData(){let e=await k(c);console.log(e)},flowNodeClick(e){console.log(e),console.log(this.$refs.superFlow.graph)},linkStyle(e){return console.log(e),{}},linkDesc(e){return e.meta?e.meta.desc:""},conformSubmit(){this.selectNode.meta.desc=this.EditorDesc,console.log("this.selectNode__",this.selectNode),console.log("nodeList__",this.nodeList),this.$emit("change",this.postData),this.newVisible=!1},cancelDrawerConf(){this.newVisible=!1},settingSubmit(){const e=this.drawerConf;this.drawerConf.type===ee.node?(e.info.meta||(e.info.meta={}),Object.keys(this.nodeSetting).forEach(t=>{this.$set(e.info.meta,t,this.nodeSetting[t])}),this.$refs.nodeSetting.resetFields(),this.$emit("change",this.postData)):(e.info.meta||(e.info.meta={}),Object.keys(this.linkSetting).forEach(t=>{this.$set(e.info.meta,t,this.linkSetting[t])}),this.$refs.linkSetting.resetFields()),e.visible=!1},docMousemove({clientX:e,clientY:t}){const i=this.dragConf;i.isMove?(i.ele.style.top=t-i.offsetTop+"px",i.ele.style.left=e-i.offsetLeft+"px"):i.isDown&&(i.isMove=Math.abs(e-i.clientX)>5||Math.abs(t-i.clientY)>5)},docMouseup({clientX:e,clientY:t}){const i=this.dragConf;if(i.isDown=!1,i.isMove){const{top:s,right:n,bottom:a,left:o}=this.$refs.flowContainer.getBoundingClientRect();if(e>o&&e<n&&t>s&&t<a){const s=this.$refs.superFlow.getMouseCoordinate(e-i.offsetLeft,t-i.offsetTop);this.$refs.superFlow.addNode({coordinate:s,...i.info})}i.isMove=!1}i.ele&&(i.ele.remove(),i.ele=null)},nodeItemMouseDown(e,t){const{clientX:i,clientY:s,currentTarget:n}=e,{top:a,left:o}=e.currentTarget.getBoundingClientRect(),l=this.dragConf,r=n.cloneNode(!0);let d={circularFlag:!1,height:"55.0",id:"Rid"+Math.round(1e6*Math.random()),meta:{desc:"",name:"Rid"+Math.round(1e6*Math.random()),prop:"cc",editStatus:!1,selectStatus:!1},name:"Rid"+Math.round(1e7*Math.random()),prop:null,status:"0",width:"105.0"};t=d,this.addItemList.push(d),Object.assign(this.dragConf,{offsetLeft:i-o,offsetTop:s-a,clientX:i,clientY:s,info:t,ele:r,isDown:!0}),r.style.position="fixed",r.style.margin="0",r.style.top=s-l.offsetTop+"px",r.style.left=i-l.offsetLeft+"px",this.$el.appendChild(this.dragConf.ele)}}},ie=te,se=(i("dd51"),Object(_["a"])(ie,Q,W,!1,null,null,null)),ne=se.exports,ae={name:"app",components:{flowDashboard:L,childtaskList:Y,Demo:ne},data(){return{visible:!1,name:"",desc:""}},mounted(){},methods:{outputData(e){console.log("data______",e)},async loadData(e){let t=await k({...e});console.log(t),resetFormData(),"success"===t.msg&&(window.location.href="")},resetFormData(){this.desc="",this.name=""},showModal(){this.visible=!0,this.resetFormData()},cancelDrawerConf(){this.visible=!1,this.resetFormData()},conformSubmit(){this.visible=!1,e.description=this.desc,e.modelName=this.name,e.agentPoint=this.$route.query.agentPoint,e.caseClass=this.$route.query.caseClass,e.casePhaseNo=this.$route.query.casePhaseNo,e.caseType=this.$route.query.caseType,e.companyId=this.$route.query.companyId,e.createUser=this.$route.query.createUser,e.modelId=this.$route.query.modelId,e.processFlag=this.$route.query.processFlag,e.processType=this.$route.query.processType;let e=this.$refs.flow.postData,t=this.$refs.childtask.Stagelist;e.allChildTask=JSON.stringify(t),this.loadData(e)}}},oe=ae,le=(i("034f"),i("5c64"),Object(_["a"])(oe,o,l,!1,null,null,null)),re=le.exports;Vue.use(n.a),Vue.use(a["a"]);const de=new a["a"]({});Vue.config.productionTip=!1,new Vue({render:e=>e(re),router:de}).$mount("#app")},"5c64":function(e,t,i){"use strict";var s=i("d32a"),n=i.n(s);n.a},"5d57":function(e,t,i){"use strict";var s=i("2272"),n=i.n(s);n.a},"5f06":function(e){e.exports=JSON.parse('{"nodeList":[{"id":"Rid0000201","width":"105","height":"55","coordinate":[-200,-100],"name":"结案归档","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0000201","prop":"approval","name":"结案归档","desc":"结案归档"}},{"id":"Rid0010301","width":"105.0","height":"55.0","coordinate":[-200,-200],"name":"立案阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010301","prop":"approval","name":"立案阶段","desc":"立案阶段"}},{"id":"Rid0010201S","width":"105.0","height":"55.0","coordinate":[-200,-300],"name":"诉前阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010201S","prop":"approval","name":"诉前阶段","desc":"诉前阶段"}},{"id":"Rid0000301","width":"54.0","height":"54.0","coordinate":[-200,0],"name":"结束","prop":null,"circularFlag":true,"status":"0","meta":{"id":"Rid0000301","prop":"end","name":"结束","desc":"结束"}},{"id":"Rid0000101","width":"54.0","height":"54.0","coordinate":[-174,-470],"name":"开始","prop":null,"circularFlag":true,"status":"2","meta":{"id":"Rid0000101","prop":"start","name":"开始","desc":"开始"}}],"linkList":[{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow57","startId":"Rid0000101","endId":"Rid0010201S","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow56","startId":"Rid0010201S","endId":"Rid0010301","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow53","startId":"Rid0010301","endId":"Rid0000201","meta":{"prop":"name","name":"受理","desc":"受理"},"name":"受理"},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow17","startId":"Rid0000201","endId":"Rid0000301","meta":{"prop":"name","name":null,"desc":null},"name":null}],"demo1":[{"startAt":[407,69],"endAt":[407,115],"id":"flow57","startId":"Rid0000101","endId":"Rid0010201S","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[407,170],"endAt":[480,207],"id":"flow56","startId":"Rid0010201S","endId":"Rid0010301","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[532,235],"endAt":[407,324],"id":"flow53","startId":"Rid0010301","endId":"Rid0000201","meta":{"prop":"name","name":"受理","desc":"受理"},"name":"受理"},{"startAt":[406,379],"endAt":[406,415],"id":"flow17","startId":"Rid0000201","endId":"Rid0000301","meta":{"prop":"name","name":null,"desc":null},"name":null}],"demo2":[{"id":"Rid0000201","width":"105.0","height":"55.0","coordinate":["355.0","324.0"],"name":"结案归档","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0000201","prop":"approval","name":"结案归档","desc":"结案归档"}},{"id":"Rid0010301","width":"105.0","height":"55.0","coordinate":["480.0","180.0"],"name":"立案阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010301","prop":"approval","name":"立案阶段","desc":"立案阶段"}},{"id":"Rid0010201S","width":"105.0","height":"55.0","coordinate":["355.0","115.0"],"name":"诉前阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010201S","prop":"approval","name":"诉前阶段","desc":"诉前阶段"}},{"id":"Rid0000301","width":"54.0","height":"54.0","coordinate":["380.5","435.0"],"name":"结束","prop":null,"circularFlag":true,"status":"0","meta":{"id":"Rid0000301","prop":"end","name":"结束","desc":"结束"}},{"id":"Rid0000101","width":"54.0","height":"54.0","coordinate":["380.5","15.0"],"name":"开始","prop":null,"circularFlag":true,"status":"2","meta":{"id":"Rid0000101","prop":"start","name":"开始","desc":"开始"}}]}')},"5f72":function(e,t){e.exports=ELEMENT},"85ec":function(e,t,i){},"86fc":function(e,t,i){"use strict";var s=i("96e5"),n=i.n(s);n.a},"94e7":function(e,t,i){},"96e5":function(e,t,i){},9785:function(e,t,i){"use strict";var s=i("b3d9"),n=i.n(s);n.a},a5b4:function(e,t,i){"use strict";var s=i("3354"),n=i.n(s);n.a},b3d9:function(e,t,i){},cf88:function(e,t,i){},d124:function(e,t,i){"use strict";var s=i("94e7"),n=i.n(s);n.a},d32a:function(e,t,i){},dd51:function(e,t,i){"use strict";var s=i("1dee"),n=i.n(s);n.a}});
//# sourceMappingURL=index.ecd95515.js.map