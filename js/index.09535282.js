(function(e){function t(t){for(var i,s,r=t[0],d=t[1],l=t[2],p=0,u=[];p<r.length;p++)s=r[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);c&&c(t);while(u.length)u.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var d=n[r];0!==o[d]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={index:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var c=d;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),o=n.n(i);o.a},2473:function(e,t,n){"use strict";var i=n("a9db"),o=n.n(i);o.a},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),o=n("5c96"),a=n.n(o),s=(n("0fae"),n("5071")),r=n.n(s),d=(n("0190"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("flowDashboard")],1)}),l=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"super-flow-base-demo"},[n("super-flow",{ref:"superFlow",attrs:{id:"only","node-list":e.nodeList,"link-list":e.linkList,origin:e.origin,"graph-menu":e.graphMenuList,"node-menu":e.nodeMenuList,"link-menu":e.linkMenuList,"enter-intercept":e.enterIntercept,"output-intercept":e.outputIntercept,"link-desc":e.linkDesc},scopedSlots:e._u([{key:"node",fn:function(t){var i=t.meta;return["start"===i.prop?n("div",{staticClass:"startNode"},[n("div",{staticClass:"inner"},[n("h6",[e._v("开始")])])]):"end"===i.prop?n("div",{staticClass:"endNode"},[n("div",{staticClass:"inner"},[n("h6",[e._v("结束")])])]):n("div",{class:"flow-node otherNode",on:{dblclick:function(t){return e.inputClick(i)}}},[i.desc.length>5?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.desc,placement:"right"}},[i.editStatus?e._e():n("section",[e._v(" "+e._s(i.desc)+" ")])]):e._e(),i.desc.length<=5?[i.editStatus?e._e():n("section",[e._v(" "+e._s(i.desc)+" ")])]:e._e(),i.editStatus?n("el-input",{attrs:{placeholder:"请输入节点描述"},on:{blur:function(t){return e.getUpdate(i)},change:function(t){return e.getUpdate(i)}},model:{value:i.desc,callback:function(t){e.$set(i,"desc",t)},expression:"meta.desc"}}):e._e()],2)]}}])}),n("el-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"连线描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.drawerConf.cancel}},[e._v(" 取 消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v(" 确 定 ")])],1)],1)],1)},p=[],u=n("ae72"),m=n("5f06");const f={node:0,link:1};var h={data(){return{inputFlag:!1,drawerType:f,drawerConf:{title:"",visible:!1,type:null,info:null,open:(e,t)=>{const n=this.drawerConf;n.visible=!0,n.type=e,n.info=t,n.type===f.node?(n.title="节点",this.$refs.nodeSetting&&this.$refs.nodeSetting.resetFields(),this.$set(this.nodeSetting,"name",t.meta.name),this.$set(this.nodeSetting,"desc",t.meta.desc)):(n.title="连线",this.$refs.linkSetting&&this.$refs.linkSetting.resetFields(),this.$set(this.linkSetting,"desc",t.meta?t.meta.desc:""))},cancel:()=>{this.drawerConf.visible=!1,this.drawerConf.type===f.node?this.$refs.nodeSetting.clearValidate():this.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{name:"",desc:""},origin:[681,465],nodeList:[],linkList:[],graphMenuList:[[{label:"开始节点",disable(e){return!!e.nodeList.find(e=>"start"===e.meta.prop)},selected:(e,t)=>{const n=e.nodeList.find(e=>"start"===e.meta.prop);n||e.addNode({width:100,height:80,coordinate:t,meta:{prop:"start",name:"开始节点"}})}},{label:"条件节点",disable:!1,selected:(e,t)=>{e.addNode({width:160,height:80,coordinate:t,meta:{prop:"condition",name:"条件节点"}})}},{label:"审批节点",disable:!1,selected:(e,t)=>{e.addNode({width:160,height:80,coordinate:t,meta:{prop:"approval",name:"审批节点"}})}},{label:"抄送节点",disable:!1,selected:(e,t)=>{e.addNode({width:160,height:80,coordinate:t,meta:{prop:"cc",name:"抄送节点"}})}},{label:"结束节点",disable(e){return!!e.nodeList.find(e=>"end"===e.meta.prop)},selected:(e,t)=>{e.addNode({width:80,height:50,coordinate:t,meta:{prop:"end",name:"结束节点"}})}}],[{label:"打印数据",selected:e=>{let t=e.toJSON(),{nodeList:n,linkList:i}=t;this.formatNode(n,i),this.formatLink(i),this.postData(),this.setBackData(),console.log(n),console.log(i),console.log(u)}},{label:"全选",selected:(e,t)=>{console.log(t),e.selectAll()}}]],nodeMenuList:[[{label:"删除",disable:!1,hidden(e){return"start"===e.meta.prop},selected(e,t){console.log(t),e.remove()}}],[{label:"编辑",selected:(e,t)=>{console.log(t),this.drawerConf.open(f.node,e)}}]],linkMenuList:[[{label:"删除",disable:!1,selected:(e,t)=>{console.log(t),e.remove()}}],[{label:"编辑",disable:!1,selected:(e,t)=>{console.log(t),this.drawerConf.open(f.link,e)}}]]}},created(){},mounted(){let e=this;e.nodeList=m.demo2,e.linkList=m.demo1,e.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-600,e.coordinate[1]=parseInt(e.coordinate[1])-400}),e.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]}),this.editStatus(),fetch("http://localhost:8083/activitiModeler/service/model/7050005").then((function(e){return e.json()})).then((function(t){e.nodeList=t.nodeList,e.linkList=t.linkList,e.nodeList.map(e=>{e.coordinate[0]=parseInt(e.coordinate[0])-400,e.coordinate[1]=parseInt(e.coordinate[1])-400}),e.linkList.map(e=>{e.startAt=[52.5,55],e.endAt=[52.5,0]})}))},methods:{getUpdate(e){this.nodeList.map(t=>{t.id===e.id&&(console.log(e),console.log(t),t.meta.editStatus=!1)})},inputClick(e){this.nodeList.map(t=>{t.id===e.id&&(console.log(e),console.log(t),t.meta.editStatus=!0)})},editStatus(){this.nodeList.map(e=>{e.meta.editStatus=!1})},enterIntercept(e,t,n){console.log(n);const i=e.meta.prop;switch(t.meta.prop){case"start":return!1;case"approval":return["start","approval","condition","cc"].includes(i);case"condition":return["start","approval","condition","cc"].includes(i);case"end":return["start","approval","condition","cc"].includes(i);default:return!0}},outputIntercept(e,t){return console.log(t),console.log(e),!("end"===e.meta.prop)},linkDesc(e){return e.meta?e.meta.desc:""},settingSubmit(){const e=this.drawerConf;this.drawerConf.type===f.node?(e.info.meta||(e.info.meta={}),Object.keys(this.nodeSetting).forEach(t=>{this.$set(e.info.meta,t,this.nodeSetting[t])}),this.$refs.nodeSetting.resetFields()):(e.info.meta||(e.info.meta={}),Object.keys(this.linkSetting).forEach(t=>{this.$set(e.info.meta,t,this.linkSetting[t])}),this.$refs.linkSetting.resetFields()),e.visible=!1},resetConfigData(){u.childShapes=[]},formatNode(e,t){e.map(e=>{let n=[];t.map(t=>{t.startId===e.id&&n.push({resourceId:e.id})}),u.childShapes.push({outgoing:n,resourceId:e.id,bounds:{upperLeft:{x:e.coordinate[0],y:e.coordinate[1]},lowerRight:{x:e.coordinate[0]+e.width,y:e.coordinate[0]+e.height}},stencil:{id:"UserTask"},dockers:[],properties:{formproperties:{formProperties:[]},multiinstance_collection:"",formkeydefinition:"",tasklisteners:{taskListeners:[]},multiinstance_condition:"",executionlisteners:{executionListeners:[]},documentation:"",prioritydefinition:"",multiinstance_cardinality:"",multiinstance_variable:"",usertaskassignment:"",multiinstance_type:"None",exclusivedefinition:!0,duedatedefinition:"",asynchronousdefinition:!1,overrideid:e.id,name:e.meta.name,isforcompensation:"false"},childShapes:[]})})},formatLink(e){e.map(e=>{u.childShapes.push({outgoing:[{resourceId:e.endId}],resourceId:e.id,bounds:{upperLeft:{x:e.startAt[0],y:e.startAt[1]},lowerRight:{x:e.endAt[0],y:e.endAt[1]}},stencil:{id:"SequenceFlow"},dockers:[],properties:{defaultflow:"false",conditionsequenceflow:"${param1==1}",executionlisteners:"",documentation:"",overrideid:"flow53",name:"受理"},childShapes:[],target:{resourceId:e.endId}})})},setBackData(){let e="http://localhost:8083/activitiModeler/editor?modelId=6217529&companyId=34&caseClass=1&processFlag=1&caseType=1&processType=&createUser=136&casePhaseNo=1,&agentPoint=1&processStatus=&flag=";try{window.top.postMessage(u,e)}catch(t){console.log(t)}},postData(){let e={dataJson:JSON.stringify(u),modelName:"测试123",description:"测试123",companyId:"34",caseClass:"1",caseType:"1",processFlag:"1",createUser:"136",casePhaseNo:"1",agentPoint:"1",status:"1"};fetch("http://localhost:8083/activitiModeler/service//model/save",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{console.log(e)})}}},g=h,v=(n("2473"),n("2877")),w=Object(v["a"])(g,c,p,!1,null,null,null),b=w.exports,y=n("bc3a"),k=n.n(y);const S="https://oa-test.bytedance.net/wfc_manage",R=k.a.create({baseURL:S,timeout:5e3});R.interceptors.request.use(e=>e,e=>(console.log(e),Promise.reject(e))),R.interceptors.response.use(e=>{const t=e.data;return 2e4!==t.code?(Object(o["Message"])({message:t.message||"Error",type:"error",duration:5e3}),Promise.reject(new Error(t.message||"Error"))):t},e=>(console.log("err"+e),Object(o["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)));var L=R;function I(e){return L({url:"/vue-element-admin/article/list",method:"get",params:e})}var _={name:"app",components:{flowDashboard:b},data(){return{importJson:{}}},mounted(){},methods:{async loadData(){let e=await I({id:1});console.log(e)}}},x=_,C=(n("034f"),Object(v["a"])(x,d,l,!1,null,null,null)),O=C.exports;i["default"].use(a.a),i["default"].use(r.a),i["default"].config.productionTip=!1,new i["default"]({render:e=>e(O)}).$mount("#app")},"5f06":function(e){e.exports=JSON.parse('{"nodeList":[{"id":"Rid0000201","width":"105","height":"55","coordinate":[-200,-100],"name":"结案归档","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0000201","prop":"approval","name":"结案归档","desc":"结案归档"}},{"id":"Rid0010301","width":"105.0","height":"55.0","coordinate":[-200,-200],"name":"立案阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010301","prop":"approval","name":"立案阶段","desc":"立案阶段"}},{"id":"Rid0010201S","width":"105.0","height":"55.0","coordinate":[-200,-300],"name":"诉前阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010201S","prop":"approval","name":"诉前阶段","desc":"诉前阶段"}},{"id":"Rid0000301","width":"54.0","height":"54.0","coordinate":[-200,0],"name":"结束","prop":null,"circularFlag":true,"status":"0","meta":{"id":"Rid0000301","prop":"end","name":"结束","desc":"结束"}},{"id":"Rid0000101","width":"54.0","height":"54.0","coordinate":[-174,-470],"name":"开始","prop":null,"circularFlag":true,"status":"2","meta":{"id":"Rid0000101","prop":"start","name":"开始","desc":"开始"}}],"linkList":[{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow57","startId":"Rid0000101","endId":"Rid0010201S","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow56","startId":"Rid0010201S","endId":"Rid0010301","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow53","startId":"Rid0010301","endId":"Rid0000201","meta":{"prop":"name","name":"受理","desc":"受理"},"name":"受理"},{"startAt":[52.5,55],"endAt":[52.5,0],"id":"flow17","startId":"Rid0000201","endId":"Rid0000301","meta":{"prop":"name","name":null,"desc":null},"name":null}],"demo1":[{"startAt":[407,69],"endAt":[407,115],"id":"flow57","startId":"Rid0000101","endId":"Rid0010201S","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[407,170],"endAt":[480,207],"id":"flow56","startId":"Rid0010201S","endId":"Rid0010301","meta":{"prop":"name","name":null,"desc":null},"name":null},{"startAt":[532,235],"endAt":[407,324],"id":"flow53","startId":"Rid0010301","endId":"Rid0000201","meta":{"prop":"name","name":"受理","desc":"受理"},"name":"受理"},{"startAt":[406,379],"endAt":[406,415],"id":"flow17","startId":"Rid0000201","endId":"Rid0000301","meta":{"prop":"name","name":null,"desc":null},"name":null}],"demo2":[{"id":"Rid0000201","width":"105.0","height":"55.0","coordinate":["355.0","324.0"],"name":"结案归档","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0000201","prop":"approval","name":"结案归档","desc":"结案归档"}},{"id":"Rid0010301","width":"105.0","height":"55.0","coordinate":["480.0","180.0"],"name":"立案阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010301","prop":"approval","name":"立案阶段","desc":"立案阶段"}},{"id":"Rid0010201S","width":"105.0","height":"55.0","coordinate":["355.0","115.0"],"name":"诉前阶段","prop":null,"circularFlag":false,"status":"0","meta":{"id":"Rid0010201S","prop":"approval","name":"诉前阶段","desc":"诉前阶段"}},{"id":"Rid0000301","width":"54.0","height":"54.0","coordinate":["380.5","435.0"],"name":"结束","prop":null,"circularFlag":true,"status":"0","meta":{"id":"Rid0000301","prop":"end","name":"结束","desc":"结束"}},{"id":"Rid0000101","width":"54.0","height":"54.0","coordinate":["380.5","15.0"],"name":"开始","prop":null,"circularFlag":true,"status":"2","meta":{"id":"Rid0000101","prop":"start","name":"开始","desc":"开始"}}]}')},"85ec":function(e,t,n){},a9db:function(e,t,n){},ae72:function(e){e.exports=JSON.parse('{"resourceId":"7050005","ssextensions":[],"bounds":{"upperLeft":{"x":0,"y":0},"lowerRight":{"x":1200,"y":1200}},"stencilset":{"namespace":"http://b3mn.org/stencilset/bpmn2.0#","url":"stencilsets/bpmn2.0/bpmn2.0.json"},"stencil":{"id":"BPMNDiagram"},"properties":{"process_id":"processId_c7c8a6e8125a49308d9ac76434ee9975","signaldefinitions":"","messagedefinitions":"","process_namespace":"http://www.activiti.org/processdef","executionlisteners":"","eventlisteners":"","documentation":"","name":"","process_version":"","process_author":""},"childShapes":[]}')}});
//# sourceMappingURL=index.09535282.js.map